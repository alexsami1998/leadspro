<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p>VisÃ£o geral</p>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Carregando dados...</p>
  </div>

  <!-- Dashboard Content -->
  <div class="dashboard-content" *ngIf="!loading">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ðŸ“Š</div>
        <div class="stat-content">
          <h3>Total de Leads</h3>
          <p class="stat-value">{{ stats.totalLeads || 0 }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ðŸ†•</div>
        <div class="stat-content">
          <h3>Leads Novos</h3>
          <p class="stat-value">{{ stats.leadsNovos || 0 }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>Qualificados</h3>
          <p class="stat-value">{{ stats.leadsQualificados || 0 }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ðŸ’°</div>
        <div class="stat-content">
          <h3>Faturados</h3>
          <p class="stat-value">{{ stats.leadsFaturados || 0 }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ðŸ“ˆ</div>
        <div class="stat-content">
          <h3>Taxa de ConversÃ£o</h3>
          <p class="stat-value">{{ (stats.conversaoRate || 0) | number:'1.1-1' }}%</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ðŸ’¾</div>
        <div class="stat-content">
          <h3>Armazenados</h3>
          <p class="stat-value">{{ stats.leadsArmazenados || 0 }}</p>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-container">
        <h3>Leads por Status</h3>
        <div class="chart-content">
          <div class="chart-item" *ngFor="let item of leadsByStatus | keyvalue">
            <div class="chart-bar">
              <div class="bar-fill" 
                   [style.background-color]="getStatusColor(item.key)"
                   [style.width]="getPercentage(item.value, getTotalLeads()) + '%'">
              </div>
            </div>
            <div class="chart-label">
              <span class="label-text">{{ getStatusLabel(item.key) }}</span>
              <span class="label-value">{{ item.value }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <h3>Leads por Fonte</h3>
        <div class="chart-content">
          <div class="chart-item" *ngFor="let item of leadsBySource | keyvalue">
            <div class="chart-bar">
              <div class="bar-fill" 
                   [style.background-color]="getSourceColor(item.key)"
                   [style.width]="getPercentage(item.value, getTotalLeads()) + '%'">
              </div>
            </div>
            <div class="chart-label">
              <span class="label-text">{{ getSourceLabel(item.key) }}</span>
              <span class="label-value">{{ item.value }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Leads -->
    <div class="recent-leads">
      <h3>Leads Recentes</h3>
      <div class="leads-list">
        <div class="lead-item" *ngFor="let lead of recentLeads">
          <div class="lead-avatar">
            <span>{{ lead.nome.charAt(0) }}</span>
          </div>
          <div class="lead-info">
            <h4>{{ lead.nome }}</h4>
            <p>{{ lead.email }}</p>
            <span class="lead-status" [style.background-color]="getStatusColor(lead.status)">
              {{ getStatusLabel(lead.status) }}
            </span>
          </div>
          <div class="lead-date">
            {{ formatDate(lead.dataCriacao) }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
