<div class="app-container" [class.sidebar-collapsed]="!sidebarOpen">
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="!sidebarOpen">
    <div class="sidebar-header">
      <!--<div class="logo" [class.collapsed]="!sidebarOpen">
        <app-logo size="small" logoPath="assets/images/logo.png" altText="Logo Soluções Monitoração"></app-logo>
      </div> -->
      <button class="sidebar-toggle" (click)="toggleSidebar()" [title]="sidebarOpen ? 'Recolher menu' : 'Expandir menu'">
        <svg class="toggle-icon" [class.rotated]="!sidebarOpen" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>
    </div>

    <nav class="sidebar-nav">
      <ul class="nav-list">
        <li class="nav-item">
          <a routerLink="/dashboard" 
             routerLinkActive="active" 
             class="nav-link"
             [class.active]="isActive('dashboard')"
             [title]="!sidebarOpen ? 'Dashboard' : ''">
            <div class="nav-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7"/>
                <rect x="14" y="3" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
                <rect x="3" y="14" width="7" height="7"/>
              </svg>
            </div>
            <span class="nav-text">Dashboard</span>
          </a>
        </li>
        
        <li class="nav-item">
          <a routerLink="/leads" 
             routerLinkActive="active" 
             class="nav-link"
             [class.active]="isActive('leads')"
             [title]="!sidebarOpen ? 'Leads' : ''">
            <div class="nav-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <span class="nav-text">Leads</span>
          </a>
        </li>

        <li class="nav-item" *ngIf="isAdmin()">
          <a routerLink="/users" 
             routerLinkActive="active" 
             class="nav-link"
             [class.active]="isActive('users')"
             [title]="!sidebarOpen ? 'Usuários' : ''">
            <div class="nav-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
            </div>
            <span class="nav-text">Usuários</span>
          </a>
        </li>

        <li class="nav-item">
          <a routerLink="/webhooks" 
             routerLinkActive="active" 
             class="nav-link"
             [class.active]="isActive('webhooks')"
             [title]="!sidebarOpen ? 'Webhooks' : ''">
            <div class="nav-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
              </svg>
            </div>
            <span class="nav-text">Webhooks</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <div class="user-info" *ngIf="currentUser$ | async as user">
        <div class="user-avatar">
          <span>{{ user.nome.charAt(0).toUpperCase() }}</span>
        </div>
        <div class="user-details" [class.collapsed]="!sidebarOpen">
          <span class="user-name">{{ user.nome }}</span>
          <span class="user-role">{{ user.role }}</span>
        </div>
      </div>
      
      <div class="user-actions" [class.collapsed]="!sidebarOpen">
        <button class="profile-button" routerLink="/profile" [title]="!sidebarOpen ? 'Meu Perfil' : ''">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
            <circle cx="12" cy="7" r="4"/>
          </svg>
          <span class="profile-text">Meu Perfil</span>
        </button>
        
        <button class="logout-button" (click)="logout()" [title]="!sidebarOpen ? 'Sair' : ''">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16,17 21,12 16,7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          <span class="logout-text">Sair</span>
        </button>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <header class="top-header">
      <button class="mobile-menu-toggle" (click)="toggleSidebar()">
        <span class="hamburger"></span>
      </button>
      <div class="header-content">
        <div class="header-logo">
          <app-logo size="medium" logoPath="assets/images/logo.png" altText="Logo Soluções Monitoração"></app-logo>
        </div>
        <div class="header-actions">
          <span class="user-greeting" *ngIf="currentUser$ | async as user">
            Olá, {{ user.nome }}!
          </span>
        </div>
      </div>
    </header>

    <div class="content-area">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- Overlay for mobile -->
  <div class="sidebar-overlay" 
       [class.active]="sidebarOpen" 
       (click)="toggleSidebar()"
       *ngIf="sidebarOpen"></div>
</div>

