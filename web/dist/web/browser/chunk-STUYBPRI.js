import{O as l,Pb as R,T as I,j as s,m as O,q as E,y as D}from"./chunk-W5YSIOEO.js";var m=(a=>(a.INDICACAO="INDICACAO",a.EVENTO="EVENTO",a.REDES_SOCIAIS="REDES_SOCIAIS",a.EX_CLIENTE="EX_CLIENTE",a.PARCEIRO="PARCEIRO",a))(m||{}),C=(r=>(r.NOVO_LEAD="NOVO_LEAD",r.LEAD_QUALIFICADO="LEAD_QUALIFICADO",r.LEAD_NAO_QUALIFICADO="LEAD_NAO_QUALIFICADO",r.DELETADO="DELETADO",r.INTERESSE="INTERESSE",r.NAO_TEVE_INTERESSE="NAO_TEVE_INTERESSE",r.APRESENTACAO_AGENDADA="APRESENTACAO_AGENDADA",r.NAO_PRECISOU_APRESENTACAO="NAO_PRECISOU_APRESENTACAO",r.NAO_FOI_POSSIVEL_AGENDAR="NAO_FOI_POSSIVEL_AGENDAR",r.PROPOSTA_ENVIADA="PROPOSTA_ENVIADA",r.PROPOSTA_ACEITA="PROPOSTA_ACEITA",r.PROPOSTA_NEGADA="PROPOSTA_NEGADA",r.AGUARDANDO_DADOS="AGUARDANDO_DADOS",r.DADOS_ENVIADOS="DADOS_ENVIADOS",r.GRUPO_CRIADO="GRUPO_CRIADO",r.CLIENTE_ENTROU_GRUPO="CLIENTE_ENTROU_GRUPO",r.CLIENTE_NAO_ENTROU_GRUPO="CLIENTE_NAO_ENTROU_GRUPO",r.AGUARDANDO_VMS="AGUARDANDO_VMS",r.VMS_ENVIADAS="VMS_ENVIADAS",r.ATIVACAO_INICIADA="ATIVACAO_INICIADA",r.IMPLANTADO="IMPLANTADO",r.CADASTRADO_SGP="CADASTRADO_SGP",r.FATURADO="FATURADO",r.ARMAZENADO_FUTURO="ARMAZENADO_FUTURO",r.COBRAR="COBRAR",r))(C||{}),_=(o=>(o.CONTATO_INICIAL="CONTATO_INICIAL",o.QUALIFICACAO="QUALIFICACAO",o.APRESENTACAO="APRESENTACAO",o.PROPOSTA="PROPOSTA",o.COBRANCA="COBRANCA",o.IMPLEMENTACAO="IMPLEMENTACAO",o.OUTRO="OUTRO",o))(_||{}),c=(e=>(e.ADMIN="ADMIN",e.USUARIO="USUARIO",e))(c||{}),U=(n=>(n.LEAD_CRIADO="LEAD_CRIADO",n.LEAD_ATUALIZADO="LEAD_ATUALIZADO",n.LEAD_DELETADO="LEAD_DELETADO",n.INTERACAO_CRIADA="INTERACAO_CRIADA",n.STATUS_ALTERADO="STATUS_ALTERADO",n.VALOR_PROPOSTA_ALTERADO="VALOR_PROPOSTA_ALTERADO",n))(U||{});var u={production:!1,apiUrl:"http://localhost:3000/api",appName:"LeadPro",version:"1.0.0",defaultLanguage:"pt-BR",dateFormat:"dd/MM/yyyy",timeFormat:"HH:mm:ss",currency:"BRL",timezone:"America/Sao_Paulo"};var N=class i{constructor(A){this.http=A;this.loadUserFromStorage()}currentUserSubject=new s(null);currentUser$=this.currentUserSubject.asObservable();apiUrl=u.apiUrl;loadUserFromStorage(){let A=localStorage.getItem("currentUser");if(A){let e=JSON.parse(A);this.currentUserSubject.next(e)}}login(A,e){return this.http.post(`${this.apiUrl}/auth/login`,{email:A,senha:e}).pipe(E(t=>t.success&&t.user?(localStorage.setItem("currentUser",JSON.stringify(t.user)),this.currentUserSubject.next(t.user),!0):!1),D(()=>{if(A==="admin"&&e==="123@mudar"){let t={id:1,nome:"Administrador",email:"admin@leadpro.com",role:"ADMIN",ativo:!0,dataCriacao:new Date,dataAtualizacao:new Date};return localStorage.setItem("currentUser",JSON.stringify(t)),this.currentUserSubject.next(t),O(!0)}return O(!1)}))}logout(){localStorage.removeItem("currentUser"),this.currentUserSubject.next(null)}isAuthenticated(){return this.currentUserSubject.value!==null}getCurrentUser(){return this.currentUserSubject.value}hasRole(A){return this.getCurrentUser()?.role===A}isAdmin(){return this.hasRole("ADMIN")}canViewContractValues(){return this.isAdmin()}canEditLeads(){return this.isAdmin()}canDeleteLeads(){return this.isAdmin()}static \u0275fac=function(e){return new(e||i)(I(R))};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a,C as b,_ as c,c as d,U as e,u as f,N as g};
