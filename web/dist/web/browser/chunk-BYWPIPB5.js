import{a as E}from"./chunk-M43YHANT.js";import"./chunk-IKNT5GKH.js";import"./chunk-STUYBPRI.js";import{Eb as _,Fb as O,Ib as P,Ja as c,Jb as S,Kb as M,Ma as s,Na as m,Pa as n,Qa as a,Ra as g,Ua as p,Y as h,Ya as i,Za as l,_a as x,db as C,fb as f,gb as u,hb as v,xa as r,ya as b}from"./chunk-W5YSIOEO.js";function D(d,t){d&1&&(n(0,"div",4),g(1,"div",5),n(2,"p"),i(3,"Carregando dados..."),a()())}function I(d,t){if(d&1&&(n(0,"div",19)(1,"div",20),g(2,"div",21),a(),n(3,"div",22)(4,"span",23),i(5),a(),n(6,"span",24),i(7),a()()()),d&2){let e=t.$implicit,o=p(2);r(2),m("background-color",o.getStatusColor(e.key))("width",o.getPercentage(e.value,o.getTotalLeads())+"%"),r(3),l(o.getStatusLabel(e.key)),r(2),l(e.value)}}function A(d,t){if(d&1&&(n(0,"div",19)(1,"div",20),g(2,"div",21),a(),n(3,"div",22)(4,"span",23),i(5),a(),n(6,"span",24),i(7),a()()()),d&2){let e=t.$implicit,o=p(2);r(2),m("background-color",o.getSourceColor(e.key))("width",o.getPercentage(e.value,o.getTotalLeads())+"%"),r(3),l(o.getSourceLabel(e.key)),r(2),l(e.value)}}function w(d,t){if(d&1&&(n(0,"div",25)(1,"div",26)(2,"span"),i(3),a()(),n(4,"div",27)(5,"h4"),i(6),a(),n(7,"p"),i(8),a(),n(9,"span",28),i(10),a()(),n(11,"div",29),i(12),a()()),d&2){let e=t.$implicit,o=p(2);r(3),l(e.nome.charAt(0)),r(3),l(e.nome),r(2),l(e.email),r(),m("background-color",o.getStatusColor(e.status)),r(),x(" ",o.getStatusLabel(e.status)," "),r(2),x(" ",o.formatDate(e.dataCriacao)," ")}}function L(d,t){if(d&1&&(n(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),i(4,"\u{1F4CA}"),a(),n(5,"div",10)(6,"h3"),i(7,"Total de Leads"),a(),n(8,"p",11),i(9),a()()(),n(10,"div",8)(11,"div",9),i(12,"\u{1F195}"),a(),n(13,"div",10)(14,"h3"),i(15,"Leads Novos"),a(),n(16,"p",11),i(17),a()()(),n(18,"div",8)(19,"div",9),i(20,"\u2705"),a(),n(21,"div",10)(22,"h3"),i(23,"Qualificados"),a(),n(24,"p",11),i(25),a()()(),n(26,"div",8)(27,"div",9),i(28,"\u{1F4B0}"),a(),n(29,"div",10)(30,"h3"),i(31,"Faturados"),a(),n(32,"p",11),i(33),a()()(),n(34,"div",8)(35,"div",9),i(36,"\u{1F4C8}"),a(),n(37,"div",10)(38,"h3"),i(39,"Taxa de Convers\xE3o"),a(),n(40,"p",11),i(41),f(42,"number"),a()()(),n(43,"div",8)(44,"div",9),i(45,"\u{1F4BE}"),a(),n(46,"div",10)(47,"h3"),i(48,"Armazenados"),a(),n(49,"p",11),i(50),a()()()(),n(51,"div",12)(52,"div",13)(53,"h3"),i(54,"Leads por Status"),a(),n(55,"div",14),c(56,I,8,6,"div",15),f(57,"keyvalue"),a()(),n(58,"div",13)(59,"h3"),i(60,"Leads por Fonte"),a(),n(61,"div",14),c(62,A,8,6,"div",15),f(63,"keyvalue"),a()()(),n(64,"div",16)(65,"h3"),i(66,"Leads Recentes"),a(),n(67,"div",17),c(68,w,13,7,"div",18),a()()()),d&2){let e=p();r(9),l(e.stats.totalLeads||0),r(8),l(e.stats.leadsNovos||0),r(8),l(e.stats.leadsQualificados||0),r(8),l(e.stats.leadsFaturados||0),r(8),x("",v(42,9,e.stats.conversaoRate||0,"1.1-1"),"%"),r(9),l(e.stats.leadsArmazenados||0),r(6),s("ngForOf",u(57,12,e.leadsByStatus)),r(6),s("ngForOf",u(63,14,e.leadsBySource)),r(6),s("ngForOf",e.recentLeads)}}var y=class d{constructor(t){this.leadService=t}stats={};leadsByStatus={};leadsBySource={};recentLeads=[];loading=!0;ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.leadService.getStats().subscribe({next:t=>{this.stats=t,this.loading=!1},error:t=>{console.error("Erro ao carregar estat\xEDsticas:",t),this.loading=!1}}),this.leadService.getLeads().subscribe({next:t=>{this.calculateStats(t),this.recentLeads=t.slice(0,5)},error:t=>{console.error("Erro ao carregar leads:",t)}})}calculateStats(t){this.leadsByStatus=t.reduce((e,o)=>(e[o.status]=(e[o.status]||0)+1,e),{}),this.leadsBySource=t.reduce((e,o)=>(e[o.fonte]=(e[o.fonte]||0)+1,e),{})}getStatusColor(t){return{NOVO_LEAD:"#3b82f6",LEAD_QUALIFICADO:"#10b981",INTERESSE:"#f59e0b",PROPOSTA_ACEITA:"#8b5cf6",IMPLANTADO:"#06b6d4",FATURADO:"#059669",ARMAZENADO_FUTURO:"#6b7280",COBRAR:"#ef4444"}[t]||"#6b7280"}getSourceColor(t){return{INDICACAO:"#3b82f6",EVENTO:"#10b981",REDES_SOCIAIS:"#f59e0b",EX_CLIENTE:"#8b5cf6",PARCEIRO:"#06b6d4"}[t]||"#6b7280"}getStatusLabel(t){return{NOVO_LEAD:"Novo Lead",LEAD_QUALIFICADO:"Qualificado",INTERESSE:"Interessado",PROPOSTA_ACEITA:"Proposta Aceita",IMPLANTADO:"Implantado",FATURADO:"Faturado",ARMAZENADO_FUTURO:"Armazenado",COBRAR:"Cobrar"}[t]||t}getSourceLabel(t){return{INDICACAO:"Indica\xE7\xE3o",EVENTO:"Evento",REDES_SOCIAIS:"Redes Sociais",EX_CLIENTE:"Ex Cliente",PARCEIRO:"Parceiro"}[t]||t}formatCurrency(t){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}formatDate(t){return new Date(t).toLocaleDateString("pt-BR")}getTotalLeads(){return Object.values(this.leadsByStatus).reduce((t,e)=>t+e,0)}getPercentage(t,e){return e===0?0:Math.round(t/e*100)}static \u0275fac=function(e){return new(e||d)(b(E))};static \u0275cmp=h({type:d,selectors:[["app-dashboard"]],standalone:!0,features:[C],decls:8,vars:2,consts:[[1,"dashboard-container"],[1,"dashboard-header"],["class","loading-container",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"charts-section"],[1,"chart-container"],[1,"chart-content"],["class","chart-item",4,"ngFor","ngForOf"],[1,"recent-leads"],[1,"leads-list"],["class","lead-item",4,"ngFor","ngForOf"],[1,"chart-item"],[1,"chart-bar"],[1,"bar-fill"],[1,"chart-label"],[1,"label-text"],[1,"label-value"],[1,"lead-item"],[1,"lead-avatar"],[1,"lead-info"],[1,"lead-status"],[1,"lead-date"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),i(3,"Dashboard"),a(),n(4,"p"),i(5,"Vis\xE3o geral do sistema de gest\xE3o de leads"),a()(),c(6,D,4,0,"div",2)(7,L,69,16,"div",3),a()),e&2&&(r(6),s("ngIf",o.loading),r(),s("ngIf",!o.loading))},dependencies:[M,_,O,S,P],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:40px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9;transition:all .3s ease;display:flex;align-items:center;gap:16px}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:2rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;color:#fff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;font-weight:600;color:#666;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:700;color:#333}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:30px;margin-bottom:40px}.chart-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9}.chart-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.2rem;font-weight:600;color:#333}.chart-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.chart-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chart-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#f1f3f4;border-radius:4px;overflow:hidden;min-width:100px}.bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .6s ease}.chart-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;min-width:120px;gap:8px}.label-text[_ngcontent-%COMP%]{font-size:.9rem;color:#333;font-weight:500}.label-value[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:600;background:#f8f9fa;padding:2px 8px;border-radius:12px;min-width:30px;text-align:center}.recent-leads[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9}.recent-leads[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.2rem;font-weight:600;color:#333}.leads-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.lead-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:12px;background:#f8f9fa;transition:all .3s ease}.lead-item[_ngcontent-%COMP%]:hover{background:#f1f3f4;transform:translate(4px)}.lead-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:1.2rem}.lead-info[_ngcontent-%COMP%]{flex:1}.lead-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;font-weight:600;color:#333}.lead-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;color:#666}.lead-status[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:.8rem;font-weight:500;color:#fff;text-transform:uppercase;letter-spacing:.5px}.lead-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:15px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.stat-card[_ngcontent-%COMP%]{padding:20px}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.5rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.charts-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.chart-container[_ngcontent-%COMP%]{padding:20px}.chart-label[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.recent-leads[_ngcontent-%COMP%]{padding:20px}.lead-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.lead-date[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.chart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.chart-bar[_ngcontent-%COMP%]{width:100%}}.stat-card[_ngcontent-%COMP%], .chart-container[_ngcontent-%COMP%], .recent-leads[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stat-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stat-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.stat-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}"]})};export{y as DashboardComponent};
