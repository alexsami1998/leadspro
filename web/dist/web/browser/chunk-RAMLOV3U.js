import{a as H}from"./chunk-M43YHANT.js";import{b as D,c as F,d as N,e as z,f as B,g as R,h as j,i as q,j as U,k as Q,l as Y,m as G}from"./chunk-FI2VPKBI.js";import"./chunk-IKNT5GKH.js";import{a as T,b as k,c as A,g as W}from"./chunk-STUYBPRI.js";import{$a as u,Eb as P,Fb as I,Ja as C,Kb as V,Ma as m,Na as y,Oa as L,Pa as n,Qa as i,Ra as E,Sa as v,Ta as g,Ua as c,Y as S,Ya as d,Za as w,_a as b,a as M,ab as x,bb as f,db as O,ea as _,fa as p,xa as l,ya as h}from"./chunk-W5YSIOEO.js";function J(r,o){r&1&&(n(0,"div",5),E(1,"div",6),n(2,"p"),d(3,"Carregando leads..."),i()())}function K(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(2);m("value",e),l(),b(" ",a.getStatusLabel(e)," ")}}function $(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(2);m("value",e),l(),b(" ",a.getSourceLabel(e)," ")}}function ee(r,o){if(r&1){let e=v();n(0,"button",23),g("click",function(){_(e);let t=c(2);return p(t.openCreateModal())}),d(1," \u2795 Novo Lead "),i()}}function te(r,o){if(r&1){let e=v();n(0,"button",49),g("click",function(){_(e);let t=c().$implicit,s=c(3);return p(s.openEditModal(t))}),d(1," \u270F\uFE0F "),i()}}function ne(r,o){if(r&1){let e=v();n(0,"button",50),g("click",function(){_(e);let t=c().$implicit,s=c(3);return p(s.deleteLead(t))}),d(1," \u{1F5D1}\uFE0F "),i()}}function ie(r,o){if(r&1&&(n(0,"div",37)(1,"span",38),d(2,"Valor:"),i(),n(3,"span",39),d(4),i()()),r&2){let e=c().$implicit,a=c(3);l(4),w(a.formatCurrency(e.valorContrato))}}function oe(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(5);m("value",e),l(),b(" ",a.getStatusLabel(e)," ")}}function ae(r,o){if(r&1){let e=v();n(0,"div",51)(1,"select",52),g("change",function(t){_(e);let s=c().$implicit,X=c(3);return p(X.onStatusChange(t,s))}),n(2,"option",14),d(3,"Mudar Status"),i(),C(4,oe,2,2,"option",15),i()()}if(r&2){let e=c(4);l(4),m("ngForOf",e.Object.values(e.LeadStatus))}}function re(r,o){if(r&1){let e=v();n(0,"div",26)(1,"div",27)(2,"div",28)(3,"span"),d(4),i()(),n(5,"div",29)(6,"h3"),d(7),i(),n(8,"p",30),d(9),i(),n(10,"p",31),d(11),i()(),n(12,"div",32)(13,"button",33),g("click",function(){let t=_(e).$implicit,s=c(3);return p(s.openWhatsApp(t))}),d(14," \u{1F4F1} "),i(),C(15,te,2,0,"button",34)(16,ne,2,0,"button",35),i()(),n(17,"div",36)(18,"div",37)(19,"span",38),d(20,"Empresa:"),i(),n(21,"span",39),d(22),i()(),n(23,"div",37)(24,"span",38),d(25,"Cargo:"),i(),n(26,"span",39),d(27),i()(),n(28,"div",37)(29,"span",38),d(30,"Fonte:"),i(),n(31,"span",40),d(32),i()(),C(33,ie,5,1,"div",41),i(),n(34,"div",42)(35,"span",43),d(36),i()(),n(37,"div",44)(38,"div",45),d(39),i(),n(40,"div",46)(41,"button",47),g("click",function(){let t=_(e).$implicit,s=c(3);return p(s.openInteractionModal(t))}),d(42," \u{1F4AC} Intera\xE7\xE3o "),i(),C(43,ae,5,1,"div",48),i()()()}if(r&2){let e=o.$implicit,a=c(3);l(4),w(e.nome.charAt(0)),l(3),w(e.nome),l(2),w(e.email),l(2),w(e.telefone),l(4),m("ngIf",a.canEditLeads()),l(),m("ngIf",a.canDeleteLeads()),l(6),w(e.empresa||"N\xE3o informado"),l(5),w(e.cargo||"N\xE3o informado"),l(5),w(a.getSourceLabel(e.fonte)),l(),m("ngIf",a.canViewContractValues()),l(2),y("background-color",a.getStatusColor(e.status)),l(),b(" ",a.getStatusLabel(e.status)," "),l(3),b(" Criado em: ",a.formatDate(e.dataCriacao)," "),l(4),m("ngIf",a.canEditLeads())}}function de(r,o){if(r&1&&(n(0,"div",24),C(1,re,44,15,"div",25),i()),r&2){let e=c(2);l(),m("ngForOf",e.filteredLeads)}}function le(r,o){if(r&1){let e=v();n(0,"div",53)(1,"div",54),d(2,"\u{1F4CB}"),i(),n(3,"h3"),d(4,"Nenhum lead encontrado"),i(),n(5,"p"),d(6,"N\xE3o h\xE1 leads que correspondam aos filtros aplicados."),i(),n(7,"button",23),g("click",function(){_(e);let t=c(2);return p(t.clearFilters())}),d(8," Limpar Filtros "),i()()}}function se(r,o){if(r&1){let e=v();n(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"input",11),f("ngModelChange",function(t){_(e);let s=c();return x(s.searchTerm,t)||(s.searchTerm=t),p(t)}),g("input",function(){_(e);let t=c();return p(t.filterLeads())}),i()(),n(5,"div",12)(6,"select",13),f("ngModelChange",function(t){_(e);let s=c();return x(s.selectedStatus,t)||(s.selectedStatus=t),p(t)}),g("change",function(){_(e);let t=c();return p(t.filterLeads())}),n(7,"option",14),d(8,"Todos os Status"),i(),C(9,K,2,2,"option",15),i(),n(10,"select",13),f("ngModelChange",function(t){_(e);let s=c();return x(s.selectedSource,t)||(s.selectedSource=t),p(t)}),g("change",function(){_(e);let t=c();return p(t.filterLeads())}),n(11,"option",14),d(12,"Todas as Fontes"),i(),C(13,$,2,2,"option",15),i(),n(14,"button",16),g("click",function(){_(e);let t=c();return p(t.clearFilters())}),d(15," \u{1F504} Limpar Filtros "),i()()(),n(16,"div",17),C(17,ee,2,0,"button",18),i()(),n(18,"div",19)(19,"span"),d(20),i()(),C(21,de,2,1,"div",20)(22,le,9,0,"div",21),i()}if(r&2){let e=c();l(4),u("ngModel",e.searchTerm),l(2),u("ngModel",e.selectedStatus),l(3),m("ngForOf",e.Object.values(e.LeadStatus)),l(),u("ngModel",e.selectedSource),l(3),m("ngForOf",e.Object.values(e.LeadSource)),l(4),m("ngIf",e.canEditLeads()),l(3),b("",e.filteredLeads.length," lead(s) encontrado(s)"),l(),m("ngIf",e.filteredLeads.length>0),l(),m("ngIf",e.filteredLeads.length===0&&!e.loading)}}function ce(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(2);m("value",e),l(),b(" ",a.getSourceLabel(e)," ")}}function _e(r,o){if(r&1){let e=v();n(0,"div",61)(1,"label",81),d(2,"Valor do Contrato"),i(),n(3,"input",82),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.newLead.valorContrato,t)||(s.newLead.valorContrato=t),p(t)}),i()()}if(r&2){let e=c(2);l(3),u("ngModel",e.newLead.valorContrato)}}function pe(r,o){if(r&1){let e=v();n(0,"div",55),g("click",function(){_(e);let t=c();return p(t.closeModals())}),n(1,"div",56),g("click",function(t){return _(e),p(t.stopPropagation())}),n(2,"div",57)(3,"h2"),d(4,"Novo Lead"),i(),n(5,"button",58),g("click",function(){_(e);let t=c();return p(t.closeModals())}),d(6,"\u2715"),i()(),n(7,"div",59)(8,"form",60),g("ngSubmit",function(){_(e);let t=c();return p(t.createLead())}),n(9,"div",61)(10,"label",62),d(11,"Nome *"),i(),n(12,"input",63),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.nome,t)||(s.newLead.nome=t),p(t)}),i()(),n(13,"div",64)(14,"div",61)(15,"label",65),d(16,"Email *"),i(),n(17,"input",66),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.email,t)||(s.newLead.email=t),p(t)}),i()(),n(18,"div",61)(19,"label",67),d(20,"Telefone *"),i(),n(21,"input",68),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.telefone,t)||(s.newLead.telefone=t),p(t)}),i()()(),n(22,"div",64)(23,"div",61)(24,"label",69),d(25,"Empresa"),i(),n(26,"input",70),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.empresa,t)||(s.newLead.empresa=t),p(t)}),i()(),n(27,"div",61)(28,"label",71),d(29,"Cargo"),i(),n(30,"input",72),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.cargo,t)||(s.newLead.cargo=t),p(t)}),i()()(),n(31,"div",64)(32,"div",61)(33,"label",73),d(34,"Fonte *"),i(),n(35,"select",74),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.fonte,t)||(s.newLead.fonte=t),p(t)}),C(36,ce,2,2,"option",15),i()(),C(37,_e,4,1,"div",75),i(),n(38,"div",61)(39,"label",76),d(40,"Observa\xE7\xF5es"),i(),n(41,"textarea",77),f("ngModelChange",function(t){_(e);let s=c();return x(s.newLead.observacoes,t)||(s.newLead.observacoes=t),p(t)}),i()(),n(42,"div",78)(43,"button",79),g("click",function(){_(e);let t=c();return p(t.closeModals())}),d(44,"Cancelar"),i(),n(45,"button",80),d(46,"Criar Lead"),i()()()()()()}if(r&2){let e=c();l(12),u("ngModel",e.newLead.nome),l(5),u("ngModel",e.newLead.email),l(4),u("ngModel",e.newLead.telefone),l(5),u("ngModel",e.newLead.empresa),l(4),u("ngModel",e.newLead.cargo),l(5),u("ngModel",e.newLead.fonte),l(),m("ngForOf",e.Object.values(e.LeadSource)),l(),m("ngIf",e.canViewContractValues()),l(4),u("ngModel",e.newLead.observacoes)}}function me(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(3);m("value",e),l(),b(" ",a.getSourceLabel(e)," ")}}function ge(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit,a=c(3);m("value",e),l(),b(" ",a.getStatusLabel(e)," ")}}function ue(r,o){if(r&1){let e=v();n(0,"div",61)(1,"label",104),d(2,"Valor do Contrato"),i(),n(3,"input",105),f("ngModelChange",function(t){_(e);let s=c(3);return x(s.editLead.valorContrato,t)||(s.editLead.valorContrato=t),p(t)}),i()()}if(r&2){let e=c(3);l(3),u("ngModel",e.editLead.valorContrato)}}function xe(r,o){if(r&1){let e=v();n(0,"div",87)(1,"form",60),g("ngSubmit",function(){_(e);let t=c(2);return p(t.updateLead())}),n(2,"div",61)(3,"label",88),d(4,"Nome *"),i(),n(5,"input",89),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.nome,t)||(s.editLead.nome=t),p(t)}),i()(),n(6,"div",64)(7,"div",61)(8,"label",90),d(9,"Email *"),i(),n(10,"input",91),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.email,t)||(s.editLead.email=t),p(t)}),i()(),n(11,"div",61)(12,"label",92),d(13,"Telefone *"),i(),n(14,"input",93),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.telefone,t)||(s.editLead.telefone=t),p(t)}),i()()(),n(15,"div",64)(16,"div",61)(17,"label",94),d(18,"Empresa"),i(),n(19,"input",95),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.empresa,t)||(s.editLead.empresa=t),p(t)}),i()(),n(20,"div",61)(21,"label",96),d(22,"Cargo"),i(),n(23,"input",97),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.cargo,t)||(s.editLead.cargo=t),p(t)}),i()()(),n(24,"div",64)(25,"div",61)(26,"label",98),d(27,"Fonte *"),i(),n(28,"select",99),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.fonte,t)||(s.editLead.fonte=t),p(t)}),C(29,me,2,2,"option",15),i()(),n(30,"div",61)(31,"label",100),d(32,"Status *"),i(),n(33,"select",101),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.status,t)||(s.editLead.status=t),p(t)}),C(34,ge,2,2,"option",15),i()()(),n(35,"div",64),C(36,ue,4,1,"div",75),i(),n(37,"div",61)(38,"label",102),d(39,"Observa\xE7\xF5es"),i(),n(40,"textarea",103),f("ngModelChange",function(t){_(e);let s=c(2);return x(s.editLead.observacoes,t)||(s.editLead.observacoes=t),p(t)}),i()(),n(41,"div",78)(42,"button",79),g("click",function(){_(e);let t=c(2);return p(t.closeModals())}),d(43,"Cancelar"),i(),n(44,"button",80),d(45,"Atualizar Lead"),i()()()()}if(r&2){let e=c(2);l(5),u("ngModel",e.editLead.nome),l(5),u("ngModel",e.editLead.email),l(4),u("ngModel",e.editLead.telefone),l(5),u("ngModel",e.editLead.empresa),l(4),u("ngModel",e.editLead.cargo),l(5),u("ngModel",e.editLead.fonte),l(),m("ngForOf",e.Object.values(e.LeadSource)),l(4),u("ngModel",e.editLead.status),l(),m("ngForOf",e.Object.values(e.LeadStatus)),l(2),m("ngIf",e.canViewContractValues()),l(4),u("ngModel",e.editLead.observacoes)}}function fe(r,o){if(r&1){let e=v();n(0,"button",110),g("click",function(){_(e);let t=c(3);return p(t.openInteractionModal(t.editLead))}),d(1," \u2795 Nova Intera\xE7\xE3o "),i()}}function Ce(r,o){if(r&1&&(n(0,"div",113)(1,"div",114)(2,"span",115),d(3),i(),n(4,"span",116),d(5),i()(),n(6,"div",117),d(7),i(),n(8,"div",118),d(9),i()()),r&2){let e=o.$implicit,a=c(4);l(3),w(a.getInteractionTypeLabel(e.tipo)),l(2),w(a.formatDate(e.dataCriacao)),l(2),b(" ",e.conteudo," "),l(2),b(" Por: ",e.usuarioCriacao," ")}}function ve(r,o){if(r&1&&(n(0,"div",111),C(1,Ce,10,4,"div",112),i()),r&2){let e=c(3);l(),m("ngForOf",e.leadInteractions)}}function be(r,o){if(r&1){let e=v();n(0,"button",23),g("click",function(){_(e);let t=c(4);return p(t.openInteractionModal(t.editLead))}),d(1," Registrar Primeira Intera\xE7\xE3o "),i()}}function we(r,o){if(r&1&&(n(0,"div",119)(1,"p"),d(2,"Nenhuma intera\xE7\xE3o registrada para este lead."),i(),C(3,be,2,0,"button",18),i()),r&2){let e=c(3);l(3),m("ngIf",e.editLead)}}function he(r,o){if(r&1&&(n(0,"div",87)(1,"div",106)(2,"h3"),d(3,"Hist\xF3rico de Intera\xE7\xF5es"),i(),C(4,fe,2,0,"button",107),i(),C(5,ve,2,1,"div",108)(6,we,4,1,"div",109),i()),r&2){let e=c(2);l(4),m("ngIf",e.editLead),l(),m("ngIf",e.leadInteractions.length>0),l(),m("ngIf",e.leadInteractions.length===0)}}function Le(r,o){if(r&1){let e=v();n(0,"div",55),g("click",function(){_(e);let t=c();return p(t.closeModals())}),n(1,"div",83),g("click",function(t){return _(e),p(t.stopPropagation())}),n(2,"div",57)(3,"h2"),d(4,"Editar Lead"),i(),n(5,"button",58),g("click",function(){_(e);let t=c();return p(t.closeModals())}),d(6,"\u2715"),i()(),n(7,"div",84)(8,"button",85),g("click",function(){_(e);let t=c();return p(t.activeTab="details")}),d(9," \u{1F4DD} Detalhes "),i(),n(10,"button",85),g("click",function(){_(e);let t=c();return p(t.activeTab="interactions")}),d(11),i()(),n(12,"div",59),C(13,xe,46,11,"div",86)(14,he,7,3,"div",86),i()()()}if(r&2){let e=c();l(8),L("active",e.activeTab==="details"),l(2),L("active",e.activeTab==="interactions"),l(),b(" \u{1F4AC} Intera\xE7\xF5es (",e.leadInteractions.length,") "),l(2),m("ngIf",e.activeTab==="details"&&e.editLead),l(),m("ngIf",e.activeTab==="interactions"&&e.editLead)}}function Me(r,o){if(r&1&&(n(0,"option",22),d(1),i()),r&2){let e=o.$implicit;m("value",e),l(),b(" ",e.replace("_"," ").toLowerCase()," ")}}function Se(r,o){if(r&1){let e=v();n(0,"div",55),g("click",function(){_(e);let t=c();return p(t.closeModals())}),n(1,"div",56),g("click",function(t){return _(e),p(t.stopPropagation())}),n(2,"div",57)(3,"h2"),d(4,"Nova Intera\xE7\xE3o"),i(),n(5,"button",58),g("click",function(){_(e);let t=c();return p(t.closeModals())}),d(6,"\u2715"),i()(),n(7,"div",59)(8,"form",60),g("ngSubmit",function(){_(e);let t=c();return p(t.addInteraction())}),n(9,"div",61)(10,"label",120),d(11,"Tipo de Intera\xE7\xE3o *"),i(),n(12,"select",121),f("ngModelChange",function(t){_(e);let s=c();return x(s.newInteraction.tipo,t)||(s.newInteraction.tipo=t),p(t)}),C(13,Me,2,2,"option",15),i()(),n(14,"div",61)(15,"label",122),d(16,"Conte\xFAdo *"),i(),n(17,"textarea",123),f("ngModelChange",function(t){_(e);let s=c();return x(s.newInteraction.conteudo,t)||(s.newInteraction.conteudo=t),p(t)}),i()(),n(18,"div",78)(19,"button",79),g("click",function(){_(e);let t=c();return p(t.closeModals())}),d(20,"Cancelar"),i(),n(21,"button",80),d(22,"Registrar Intera\xE7\xE3o"),i()()()()()()}if(r&2){let e=c();l(12),u("ngModel",e.newInteraction.tipo),l(),m("ngForOf",e.Object.values(e.InteractionType)),l(4),u("ngModel",e.newInteraction.conteudo)}}var Z=class r{constructor(o,e){this.leadService=o;this.authService=e}leads=[];filteredLeads=[];selectedLead=null;showCreateModal=!1;showEditModal=!1;showInteractionModal=!1;loading=!0;activeTab="details";leadInteractions=[];searchTerm="";selectedStatus="";selectedSource="";newLead={};editLead=null;newInteraction={};LeadStatus=k;LeadSource=T;InteractionType=A;Object=Object;ngOnInit(){this.loadLeads()}loadLeads(){this.loading=!0,this.leadService.getLeads().subscribe({next:o=>{this.leads=o,this.filteredLeads=o,this.loading=!1},error:o=>{console.error("Erro ao carregar leads:",o),this.loading=!1}})}createLead(){if(!this.newLead.nome||!this.newLead.email||!this.newLead.telefone||!this.newLead.fonte){alert("Por favor, preencha todos os campos obrigat\xF3rios");return}this.leadService.createLead(this.newLead).subscribe({next:o=>{this.leads.unshift(o),this.filterLeads(),this.showCreateModal=!1,this.newLead={},alert("Lead criado com sucesso!")},error:o=>{console.error("Erro ao criar lead:",o),alert("Erro ao criar lead")}})}updateLead(){this.editLead?.id&&this.leadService.updateLead(this.editLead.id,this.editLead).subscribe({next:o=>{let e=this.leads.findIndex(a=>a.id===o.id);e!==-1&&(this.leads[e]=o,this.filterLeads()),this.showEditModal=!1,this.editLead=null,alert("Lead atualizado com sucesso!")},error:o=>{console.error("Erro ao atualizar lead:",o),alert("Erro ao atualizar lead")}})}deleteLead(o){confirm(`Tem certeza que deseja excluir o lead "${o.nome}"?`)&&o.id&&this.leadService.deleteLead(o.id).subscribe({next:()=>{this.leads=this.leads.filter(e=>e.id!==o.id),this.filterLeads(),alert("Lead exclu\xEDdo com sucesso!")},error:e=>{console.error("Erro ao excluir lead:",e),alert("Erro ao excluir lead")}})}updateLeadStatus(o,e){o.id&&this.leadService.updateLeadStatus(o.id,e).subscribe({next:a=>{let t=this.leads.findIndex(s=>s.id===a.id);t!==-1&&(this.leads[t]=a,this.filterLeads()),alert(`Status do lead atualizado para: ${this.getStatusLabel(e)}`)},error:a=>{console.error("Erro ao atualizar status:",a),alert("Erro ao atualizar status")}})}onStatusChange(o,e){let t=o.target.value;t&&this.updateLeadStatus(e,t)}addInteraction(){if(!this.selectedLead?.id||!this.newInteraction.tipo||!this.newInteraction.conteudo){alert("Por favor, preencha todos os campos da intera\xE7\xE3o");return}this.leadService.createInteraction(this.selectedLead.id,this.newInteraction.tipo,this.newInteraction.conteudo).subscribe({next:o=>{this.showInteractionModal=!1,this.newInteraction={},alert("Intera\xE7\xE3o registrada com sucesso!")},error:o=>{console.error("Erro ao criar intera\xE7\xE3o:",o),alert("Erro ao criar intera\xE7\xE3o")}})}filterLeads(){this.filteredLeads=this.leads.filter(o=>{let e=!this.searchTerm||o.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||o.email.toLowerCase().includes(this.searchTerm.toLowerCase())||o.telefone.includes(this.searchTerm)||o.empresa?.toLowerCase().includes(this.searchTerm.toLowerCase()),a=!this.selectedStatus||o.status===this.selectedStatus,t=!this.selectedSource||o.fonte===this.selectedSource;return e&&a&&t})}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedSource="",this.filterLeads()}openCreateModal(){this.showCreateModal=!0,this.newLead={status:"NOVO_LEAD",fonte:"INDICACAO"}}openEditModal(o){this.editLead=M({},o),this.showEditModal=!0,this.activeTab="details",o.id&&this.loadLeadInteractions(o.id)}openInteractionModal(o){this.selectedLead=o,this.showInteractionModal=!0,this.newInteraction={tipo:"CONTATO_INICIAL"}}closeModals(){this.showCreateModal=!1,this.showEditModal=!1,this.showInteractionModal=!1,this.newLead={},this.editLead=null,this.newInteraction={},this.selectedLead=null,this.activeTab="details",this.leadInteractions=[]}loadLeadInteractions(o){this.leadService.getInteractions(o).subscribe({next:e=>{this.leadInteractions=e},error:e=>{console.error("Erro ao carregar intera\xE7\xF5es:",e),this.leadInteractions=[]}})}getStatusLabel(o){return{NOVO_LEAD:"Novo Lead",LEAD_QUALIFICADO:"Qualificado",INTERESSE:"Interessado",PROPOSTA_ACEITA:"Proposta Aceita",IMPLANTADO:"Implantado",FATURADO:"Faturado",ARMAZENADO_FUTURO:"Armazenado",COBRAR:"Cobrar"}[o]||o}getSourceLabel(o){return{INDICACAO:"Indica\xE7\xE3o",EVENTO:"Evento",REDES_SOCIAIS:"Redes Sociais",EX_CLIENTE:"Ex Cliente",PARCEIRO:"Parceiro"}[o]||o}getInteractionTypeLabel(o){return{CONTATO_INICIAL:"Contato Inicial",QUALIFICACAO:"Qualifica\xE7\xE3o",APRESENTACAO:"Apresenta\xE7\xE3o",PROPOSTA:"Proposta",COBRANCA:"Cobran\xE7a",IMPLEMENTACAO:"Implementa\xE7\xE3o",OUTRO:"Outro"}[o]||o}getStatusColor(o){return{NOVO_LEAD:"#3b82f6",LEAD_QUALIFICADO:"#10b981",INTERESSE:"#f59e0b",PROPOSTA_ACEITA:"#8b5cf6",IMPLANTADO:"#06b6d4",FATURADO:"#059669",ARMAZENADO_FUTURO:"#6b7280",COBRAR:"#ef4444"}[o]||"#6b7280"}formatCurrency(o){return o?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o):"R$ 0,00"}formatDate(o){return new Date(o).toLocaleDateString("pt-BR")}canEditLeads(){return this.authService.canEditLeads()}canDeleteLeads(){return this.authService.canDeleteLeads()}canViewContractValues(){return this.authService.canViewContractValues()}openWhatsApp(o){this.leadService.openWhatsApp(o)}static \u0275fac=function(e){return new(e||r)(h(H),h(W))};static \u0275cmp=S({type:r,selectors:[["app-leads"]],standalone:!0,features:[O],decls:11,vars:5,consts:[[1,"leads-container"],[1,"leads-header"],["class","loading-container",4,"ngIf"],["class","leads-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"leads-content"],[1,"actions-bar"],[1,"search-filters"],[1,"search-box"],["type","text","placeholder","Buscar leads...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filters"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-outline",3,"click"],[1,"actions"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"results-info"],["class","leads-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"value"],[1,"btn","btn-primary",3,"click"],[1,"leads-grid"],["class","lead-card",4,"ngFor","ngForOf"],[1,"lead-card"],[1,"lead-header"],[1,"lead-avatar"],[1,"lead-info"],[1,"lead-email"],[1,"lead-phone"],[1,"lead-actions"],["title","Enviar WhatsApp",1,"btn-icon",3,"click"],["class","btn-icon","title","Editar",3,"click",4,"ngIf"],["class","btn-icon btn-danger","title","Excluir",3,"click",4,"ngIf"],[1,"lead-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","source-badge"],["class","detail-row",4,"ngIf"],[1,"lead-status"],[1,"status-badge"],[1,"lead-footer"],[1,"lead-date"],[1,"lead-actions-footer"],[1,"btn","btn-sm",3,"click"],["class","status-actions",4,"ngIf"],["title","Editar",1,"btn-icon",3,"click"],["title","Excluir",1,"btn-icon","btn-danger",3,"click"],[1,"status-actions"],[1,"status-select",3,"change"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","nome"],["type","text","id","nome","name","nome","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["for","email"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","telefone"],["type","text","id","telefone","name","telefone","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","empresa"],["type","text","id","empresa","name","empresa",1,"form-input",3,"ngModelChange","ngModel"],["for","cargo"],["type","text","id","cargo","name","cargo",1,"form-input",3,"ngModelChange","ngModel"],["for","fonte"],["id","fonte","name","fonte","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["for","observacoes"],["id","observacoes","name","observacoes","rows","3",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["for","valorContrato"],["type","number","id","valorContrato","name","valorContrato","step","0.01",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal","modal-large",3,"click"],[1,"modal-tabs"],[1,"tab-button",3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["for","edit-nome"],["type","text","id","edit-nome","name","nome","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-email"],["type","email","id","edit-email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-telefone"],["type","text","id","edit-telefone","name","telefone","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-empresa"],["type","text","id","edit-empresa","name","empresa",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-cargo"],["type","text","id","edit-cargo","name","cargo",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-fonte"],["id","edit-fonte","name","fonte","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-status"],["id","edit-status","name","status","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-observacoes"],["id","edit-observacoes","name","observacoes","rows","3",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-valorContrato"],["type","number","id","edit-valorContrato","name","valorContrato","step","0.01",1,"form-input",3,"ngModelChange","ngModel"],[1,"interactions-header"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","interactions-list",4,"ngIf"],["class","empty-interactions",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"interactions-list"],["class","interaction-item",4,"ngFor","ngForOf"],[1,"interaction-item"],[1,"interaction-header"],[1,"interaction-type"],[1,"interaction-date"],[1,"interaction-content"],[1,"interaction-user"],[1,"empty-interactions"],["for","interaction-tipo"],["id","interaction-tipo","name","tipo","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","interaction-conteudo"],["id","interaction-conteudo","name","conteudo","rows","4","required","","placeholder","Descreva a intera\xE7\xE3o realizada...",1,"form-input",3,"ngModelChange","ngModel"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),d(3,"Gest\xE3o de Leads"),i(),n(4,"p"),d(5,"Gerencie todos os leads do sistema"),i()(),C(6,J,4,0,"div",2)(7,se,23,9,"div",3)(8,pe,47,9,"div",4)(9,Le,15,7,"div",4)(10,Se,23,3,"div",4),i()),e&2&&(l(6),m("ngIf",a.loading),l(),m("ngIf",!a.loading),l(),m("ngIf",a.showCreateModal),l(),m("ngIf",a.showEditModal),l(),m("ngIf",a.showInteractionModal))},dependencies:[V,P,I,G,R,U,Q,D,j,q,F,N,Y,B,z],styles:[".leads-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px}.leads-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.leads-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.leads-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;gap:20px;flex-wrap:wrap}.search-filters[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex:1;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e1e5e9;border-radius:6px;font-size:.9rem;background:#fff;min-width:150px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.results-info[_ngcontent-%COMP%]{margin-bottom:20px;color:#666;font-size:.9rem}.leads-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;margin-bottom:30px}.lead-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9;transition:all .3s ease}.lead-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.lead-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:15px}.lead-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:1.2rem}.lead-info[_ngcontent-%COMP%]{flex:1}.lead-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:1.1rem;font-weight:600;color:#333}.lead-email[_ngcontent-%COMP%], .lead-phone[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#666}.lead-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;padding:8px;border-radius:6px;transition:all .3s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:#f1f3f4;transform:scale(1.1)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fee;color:#ef4444}.lead-details[_ngcontent-%COMP%]{margin-bottom:15px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:.9rem}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:500}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:400}.source-badge[_ngcontent-%COMP%]{background:#f1f3f4;padding:2px 8px;border-radius:12px;font-size:.8rem;color:#666}.lead-status[_ngcontent-%COMP%]{margin-bottom:15px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;border-radius:20px;font-size:.8rem;font-weight:500;color:#fff;text-transform:uppercase;letter-spacing:.5px}.lead-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}.lead-date[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.lead-actions-footer[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.status-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #e1e5e9;border-radius:6px;font-size:.8rem;background:#fff;min-width:120px}.status-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1rem}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .3s ease;border:none;display:inline-flex;align-items:center;justify-content:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px)}.interactions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e1e5e9}.interactions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333}.interactions-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.interaction-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e1e5e9;border-radius:8px;padding:15px;margin-bottom:12px;transition:all .3s ease}.interaction-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.interaction-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.interaction-type[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:500;text-transform:uppercase}.interaction-date[_ngcontent-%COMP%]{color:#64748b;font-size:.8rem}.interaction-content[_ngcontent-%COMP%]{color:#334155;font-size:.9rem;line-height:1.5;margin-bottom:10px}.interaction-user[_ngcontent-%COMP%]{color:#64748b;font-size:.8rem;font-style:italic}.empty-interactions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#64748b}.empty-interactions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-primary[_ngcontent-%COMP%]:not(:disabled):hover{box-shadow:0 6px 20px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:not(:disabled):hover{background:#4b5563}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#667eea;border:2px solid #667eea}.btn-outline[_ngcontent-%COMP%]:not(:disabled):hover{background:#667eea;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.8rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-large[_ngcontent-%COMP%]{max-width:800px;width:100%}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e1e5e9}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e1e5e9;background:#f8fafc}.tab-button[_ngcontent-%COMP%]{background:none;border:none;padding:16px 24px;font-size:.9rem;font-weight:500;color:#64748b;cursor:pointer;transition:all .3s ease;border-bottom:3px solid transparent}.tab-button[_ngcontent-%COMP%]:hover{color:#334155;background:#f1f5f9}.tab-button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea;background:#fff}.tab-content[_ngcontent-%COMP%]{display:block}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;padding:8px;border-radius:6px;transition:background-color .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background:#f1f3f4}.modal-body[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:.9rem}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e0}textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e1e5e9}@media (max-width: 768px){.leads-container[_ngcontent-%COMP%]{padding:15px}.leads-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.actions-bar[_ngcontent-%COMP%], .search-filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filters[_ngcontent-%COMP%]{justify-content:center}.leads-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.lead-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.lead-actions-footer[_ngcontent-%COMP%]{justify-content:center}.modal[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.leads-grid[_ngcontent-%COMP%]{gap:15px}.lead-card[_ngcontent-%COMP%]{padding:15px}.lead-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.lead-actions[_ngcontent-%COMP%]{justify-content:center}}.lead-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-input[_ngcontent-%COMP%]:focus-visible, .btn[_ngcontent-%COMP%]:focus-visible, .btn-icon[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}*[_ngcontent-%COMP%]{transition:color .3s ease,background-color .3s ease,border-color .3s ease,transform .3s ease}"]})};export{Z as LeadsComponent};
