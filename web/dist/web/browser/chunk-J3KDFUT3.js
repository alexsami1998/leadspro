import{a as D}from"./chunk-CADSBCFI.js";import"./chunk-JOMA7PJZ.js";import{Aa as b,Ga as O,Jb as S,Ka as x,Kb as M,Nb as E,Ob as y,Pb as I,Xa as g,Xb as p,Ya as t,Yb as l,Za as n,_a as u,bb as f,fb as h,hb as a,ib as c,jb as C,pb as _,qb as v,rb as P,wa as o}from"./chunk-G7TP3EBD.js";function A(d,s){d&1&&(t(0,"div",4),u(1,"div",5),t(2,"p"),a(3,"Carregando dados..."),n()())}function w(d,s){if(d&1&&(t(0,"div",19)(1,"div",20),u(2,"div",21),n(),t(3,"div",22)(4,"span",23),a(5),n(),t(6,"span",24),a(7),n()()()),d&2){let i=s.$implicit,e=f(2);o(2),h("background-color",e.getStatusColor(i.key))("width",e.getPercentage(i.value,e.getTotalLeads())+"%"),o(3),c(e.getStatusLabel(i.key)),o(2),c(i.value)}}function L(d,s){if(d&1&&(t(0,"div",19)(1,"div",20),u(2,"div",21),n(),t(3,"div",22)(4,"span",23),a(5),n(),t(6,"span",24),a(7),n()()()),d&2){let i=s.$implicit,e=f(2);o(2),h("background-color",e.getSourceColor(i.key))("width",e.getPercentage(i.value,e.getTotalLeads())+"%"),o(3),c(e.getSourceLabel(i.key)),o(2),c(i.value)}}function T(d,s){if(d&1&&(t(0,"div",25)(1,"div",26)(2,"span"),a(3),n()(),t(4,"div",27)(5,"h4"),a(6),n(),t(7,"p"),a(8),n(),t(9,"span",28),a(10),n()(),t(11,"div",29),a(12),n()()),d&2){let i=s.$implicit,e=f(2);o(3),c(i.nome.charAt(0)),o(3),c(i.nome),o(2),c(i.email),o(),h("background-color",e.getStatusColor(i.status)),o(),C(" ",e.getStatusLabel(i.status)," "),o(2),C(" ",e.formatDate(i.dataCriacao)," ")}}function k(d,s){if(d&1&&(t(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),a(4,"\u{1F4CA}"),n(),t(5,"div",10)(6,"h3"),a(7,"Total de Leads"),n(),t(8,"p",11),a(9),n()()(),t(10,"div",8)(11,"div",9),a(12,"\u{1F195}"),n(),t(13,"div",10)(14,"h3"),a(15,"Leads Novos"),n(),t(16,"p",11),a(17),n()()(),t(18,"div",8)(19,"div",9),a(20,"\u2705"),n(),t(21,"div",10)(22,"h3"),a(23,"Qualificados"),n(),t(24,"p",11),a(25),n()()(),t(26,"div",8)(27,"div",9),a(28,"\u{1F4B0}"),n(),t(29,"div",10)(30,"h3"),a(31,"Faturados"),n(),t(32,"p",11),a(33),n()()(),t(34,"div",8)(35,"div",9),a(36,"\u{1F4C8}"),n(),t(37,"div",10)(38,"h3"),a(39,"Taxa de Convers\xE3o"),n(),t(40,"p",11),a(41),_(42,"number"),n()()(),t(43,"div",8)(44,"div",9),a(45,"\u{1F4BE}"),n(),t(46,"div",10)(47,"h3"),a(48,"Armazenados"),n(),t(49,"p",11),a(50),n()()()(),t(51,"div",12)(52,"div",13)(53,"h3"),a(54,"Leads por Status"),n(),t(55,"div",14),x(56,w,8,6,"div",15),_(57,"keyvalue"),n()(),t(58,"div",13)(59,"h3"),a(60,"Leads por Fonte"),n(),t(61,"div",14),x(62,L,8,6,"div",15),_(63,"keyvalue"),n()()(),t(64,"div",16)(65,"h3"),a(66,"Leads Recentes"),n(),t(67,"div",17),x(68,T,13,7,"div",18),n()()()),d&2){let i=f();o(9),c(i.stats.totalLeads||0),o(8),c(i.stats.leadsNovos||0),o(8),c(i.stats.leadsQualificados||0),o(8),c(i.stats.leadsFaturados||0),o(8),C("",P(42,9,i.stats.conversaoRate||0,"1.1-1"),"%"),o(9),c(i.stats.leadsArmazenados||0),o(6),g("ngForOf",v(57,12,i.leadsByStatus)),o(6),g("ngForOf",v(63,14,i.leadsBySource)),o(6),g("ngForOf",i.recentLeads)}}var U=(()=>{let s=class s{constructor(e){this.leadService=e,this.stats={},this.leadsByStatus={},this.leadsBySource={},this.recentLeads=[],this.loading=!0}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.leadService.getStats().subscribe({next:e=>{this.stats=e,this.loading=!1},error:e=>{console.error("Erro ao carregar estat\xEDsticas:",e),this.loading=!1}}),this.leadService.getLeads().subscribe({next:e=>{this.calculateStats(e),this.recentLeads=e.slice(0,5)},error:e=>{console.error("Erro ao carregar leads:",e)}})}calculateStats(e){this.leadsByStatus=e.reduce((r,m)=>(r[m.status]=(r[m.status]||0)+1,r),{}),this.leadsBySource=e.reduce((r,m)=>(r[m.fonte]=(r[m.fonte]||0)+1,r),{})}getStatusColor(e){return{[l.NOVO_LEAD]:"#3b82f6",[l.LEAD_QUALIFICADO]:"#10b981",[l.INTERESSE]:"#f59e0b",[l.PROPOSTA_ACEITA]:"#8b5cf6",[l.IMPLANTADO]:"#06b6d4",[l.FATURADO]:"#059669",[l.ARMAZENADO_FUTURO]:"#6b7280",[l.COBRAR]:"#ef4444"}[e]||"#6b7280"}getSourceColor(e){return{[p.INDICACAO]:"#3b82f6",[p.EVENTO]:"#10b981",[p.REDES_SOCIAIS]:"#f59e0b",[p.EX_CLIENTE]:"#8b5cf6",[p.PARCEIRO]:"#06b6d4"}[e]||"#6b7280"}getStatusLabel(e){return{[l.NOVO_LEAD]:"Novo Lead",[l.LEAD_QUALIFICADO]:"Qualificado",[l.INTERESSE]:"Interessado",[l.PROPOSTA_ACEITA]:"Proposta Aceita",[l.IMPLANTADO]:"Implantado",[l.FATURADO]:"Faturado",[l.ARMAZENADO_FUTURO]:"Armazenado",[l.COBRAR]:"Cobrar"}[e]||e}getSourceLabel(e){return{[p.INDICACAO]:"Indica\xE7\xE3o",[p.EVENTO]:"Evento",[p.REDES_SOCIAIS]:"Redes Sociais",[p.EX_CLIENTE]:"Ex Cliente",[p.PARCEIRO]:"Parceiro"}[e]||e}formatCurrency(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("pt-BR")}getTotalLeads(){return Object.values(this.leadsByStatus).reduce((e,r)=>e+r,0)}getPercentage(e,r){return r===0?0:Math.round(e/r*100)}};s.\u0275fac=function(r){return new(r||s)(b(D))},s.\u0275cmp=O({type:s,selectors:[["app-dashboard"]],decls:8,vars:2,consts:[[1,"dashboard-container"],[1,"dashboard-header"],["class","loading-container",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"dashboard-content"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"charts-section"],[1,"chart-container"],[1,"chart-content"],["class","chart-item",4,"ngFor","ngForOf"],[1,"recent-leads"],[1,"leads-list"],["class","lead-item",4,"ngFor","ngForOf"],[1,"chart-item"],[1,"chart-bar"],[1,"bar-fill"],[1,"chart-label"],[1,"label-text"],[1,"label-value"],[1,"lead-item"],[1,"lead-avatar"],[1,"lead-info"],[1,"lead-status"],[1,"lead-date"]],template:function(r,m){r&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Dashboard"),n(),t(4,"p"),a(5,"Vis\xE3o geral do sistema de gest\xE3o de leads"),n()(),x(6,A,4,0,"div",2)(7,k,69,16,"div",3),n()),r&2&&(o(6),g("ngIf",m.loading),o(),g("ngIf",!m.loading))},dependencies:[I,S,M,y,E],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px}.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:40px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9;transition:all .3s ease;display:flex;align-items:center;gap:16px}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:2rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:12px;color:#fff}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;font-weight:600;color:#666;text-transform:uppercase;letter-spacing:.5px}.stat-value[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:700;color:#333}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:30px;margin-bottom:40px}.chart-container[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9}.chart-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.2rem;font-weight:600;color:#333}.chart-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.chart-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.chart-bar[_ngcontent-%COMP%]{flex:1;height:8px;background:#f1f3f4;border-radius:4px;overflow:hidden;min-width:100px}.bar-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .6s ease}.chart-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;min-width:120px;gap:8px}.label-text[_ngcontent-%COMP%]{font-size:.9rem;color:#333;font-weight:500}.label-value[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:600;background:#f8f9fa;padding:2px 8px;border-radius:12px;min-width:30px;text-align:center}.recent-leads[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9}.recent-leads[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1.2rem;font-weight:600;color:#333}.leads-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.lead-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-radius:12px;background:#f8f9fa;transition:all .3s ease}.lead-item[_ngcontent-%COMP%]:hover{background:#f1f3f4;transform:translate(4px)}.lead-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:1.2rem}.lead-info[_ngcontent-%COMP%]{flex:1}.lead-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1rem;font-weight:600;color:#333}.lead-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:.9rem;color:#666}.lead-status[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:20px;font-size:.8rem;font-weight:500;color:#fff;text-transform:uppercase;letter-spacing:.5px}.lead-date[_ngcontent-%COMP%]{font-size:.9rem;color:#666;font-weight:500}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:15px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px}.stat-card[_ngcontent-%COMP%]{padding:20px}.stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;font-size:1.5rem}.stat-value[_ngcontent-%COMP%]{font-size:1.5rem}.charts-section[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px}.chart-container[_ngcontent-%COMP%]{padding:20px}.chart-label[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.recent-leads[_ngcontent-%COMP%]{padding:20px}.lead-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.lead-date[_ngcontent-%COMP%]{align-self:flex-end}}@media (max-width: 480px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stat-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.chart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.chart-bar[_ngcontent-%COMP%]{width:100%}}.stat-card[_ngcontent-%COMP%], .chart-container[_ngcontent-%COMP%], .recent-leads[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stat-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.stat-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.stat-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.stat-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.stat-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.stat-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}"]});let d=s;return d})();export{U as DashboardComponent};
