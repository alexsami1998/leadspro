import{e as O}from"./chunk-4CABFNOJ.js";import{b as k,c as p,d as I,e as N,h as T,j as z,k as A,p as G,r as V}from"./chunk-CY3U7FEM.js";import{Aa as S,Ga as E,Ka as m,Kb as y,Pb as M,Xa as s,Ya as o,Za as t,_a as u,ab as x,bc as U,gb as f,hb as n,wa as a}from"./chunk-G7TP3EBD.js";function q(r,l){r&1&&(o(0,"div",25),n(1," Nome \xE9 obrigat\xF3rio "),t())}function D(r,l){r&1&&(o(0,"div",25),n(1," E-mail v\xE1lido \xE9 obrigat\xF3rio "),t())}function j(r,l){r&1&&(o(0,"span"),n(1,"Atualizar Perfil"),t())}function B(r,l){r&1&&(o(0,"span"),n(1,"Atualizando..."),t())}function R(r,l){r&1&&(o(0,"div",25),n(1," Senha atual \xE9 obrigat\xF3ria "),t())}function Y(r,l){r&1&&(o(0,"div",25),n(1," Nova senha deve ter pelo menos 6 caracteres "),t())}function L(r,l){r&1&&(o(0,"div",25),n(1," Confirma\xE7\xE3o de senha \xE9 obrigat\xF3ria "),t())}function $(r,l){r&1&&(o(0,"span"),n(1,"Alterar Senha"),t())}function H(r,l){r&1&&(o(0,"span"),n(1,"Alterando..."),t())}var te=(()=>{let l=class l{constructor(i,d,e){this.fb=i,this.authService=d,this.router=e,this.currentUser=null,this.isUpdating=!1,this.isUpdatingPassword=!1}ngOnInit(){this.authService.currentUser$.subscribe(i=>{this.currentUser=i,i&&this.initForms(i)})}initForms(i){this.profileForm=this.fb.group({nome:[i.nome,[p.required]],email:[i.email,[p.required,p.email]],role:[i.role]}),this.passwordForm=this.fb.group({currentPassword:["",[p.required]],newPassword:["",[p.required,p.minLength(6)]],confirmPassword:["",[p.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(i){let d=i.get("newPassword")?.value,e=i.get("confirmPassword")?.value;return d!==e?{passwordMismatch:!0}:null}updateProfile(){if(this.profileForm.valid&&this.currentUser){this.isUpdating=!0;let i={userId:this.currentUser.id,nome:this.profileForm.get("nome")?.value,email:this.profileForm.get("email")?.value};console.log("Atualizando perfil:",i),setTimeout(()=>{this.isUpdating=!1,this.currentUser&&(this.currentUser.nome=i.nome,this.currentUser.email=i.email),alert("Perfil atualizado com sucesso!")},1e3)}}updatePassword(){if(this.passwordForm.valid&&this.currentUser){this.isUpdatingPassword=!0;let i={userId:this.currentUser.id,currentPassword:this.passwordForm.get("currentPassword")?.value,newPassword:this.passwordForm.get("newPassword")?.value};console.log("Alterando senha:",i),setTimeout(()=>{this.isUpdatingPassword=!1,this.passwordForm.reset(),alert("Senha alterada com sucesso!")},1e3)}}goBack(){this.router.navigate(["/dashboard"])}};l.\u0275fac=function(d){return new(d||l)(S(G),S(U),S(O))},l.\u0275cmp=E({type:l,selectors:[["app-profile"]],decls:53,vars:23,consts:[[1,"profile-container"],[1,"profile-header"],[1,"profile-content"],[1,"profile-card"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","nome"],["type","text","id","nome","formControlName","nome",1,"form-control"],["class","error-message",4,"ngIf"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","role"],["type","text","id","role","formControlName","role","readonly","",1,"form-control"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"password-form",3,"ngSubmit","formGroup"],["for","currentPassword"],["type","password","id","currentPassword","formControlName","currentPassword",1,"form-control"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn-secondary",3,"disabled"],[1,"profile-footer"],[1,"btn-back",3,"click"],[1,"error-message"]],template:function(d,e){if(d&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Meu Perfil"),t(),o(4,"p"),n(5,"Gerencie suas informa\xE7\xF5es pessoais e credenciais de acesso"),t()(),o(6,"div",2)(7,"div",3)(8,"h2"),n(9,"Informa\xE7\xF5es Pessoais"),t(),o(10,"form",4),x("ngSubmit",function(){return e.updateProfile()}),o(11,"div",5)(12,"label",6),n(13,"Nome Completo"),t(),u(14,"input",7),m(15,q,2,0,"div",8),t(),o(16,"div",5)(17,"label",9),n(18,"E-mail"),t(),u(19,"input",10),m(20,D,2,0,"div",8),t(),o(21,"div",5)(22,"label",11),n(23,"Fun\xE7\xE3o"),t(),u(24,"input",12),t(),o(25,"button",13),m(26,j,2,0,"span",14)(27,B,2,0,"span",14),t()()(),o(28,"div",3)(29,"h2"),n(30,"Alterar Senha"),t(),o(31,"form",15),x("ngSubmit",function(){return e.updatePassword()}),o(32,"div",5)(33,"label",16),n(34,"Senha Atual"),t(),u(35,"input",17),m(36,R,2,0,"div",8),t(),o(37,"div",5)(38,"label",18),n(39,"Nova Senha"),t(),u(40,"input",19),m(41,Y,2,0,"div",8),t(),o(42,"div",5)(43,"label",20),n(44,"Confirmar Nova Senha"),t(),u(45,"input",21),m(46,L,2,0,"div",8),t(),o(47,"button",22),m(48,$,2,0,"span",14)(49,H,2,0,"span",14),t()()()(),o(50,"div",23)(51,"button",24),x("click",function(){return e.goBack()}),n(52," \u2190 Voltar "),t()()()),d&2){let c,g,b,P,w,_,v,h,C,F;a(10),s("formGroup",e.profileForm),a(4),f("error",((c=e.profileForm.get("nome"))==null?null:c.invalid)&&((c=e.profileForm.get("nome"))==null?null:c.touched)),a(),s("ngIf",((g=e.profileForm.get("nome"))==null?null:g.invalid)&&((g=e.profileForm.get("nome"))==null?null:g.touched)),a(4),f("error",((b=e.profileForm.get("email"))==null?null:b.invalid)&&((b=e.profileForm.get("email"))==null?null:b.touched)),a(),s("ngIf",((P=e.profileForm.get("email"))==null?null:P.invalid)&&((P=e.profileForm.get("email"))==null?null:P.touched)),a(5),s("disabled",e.profileForm.invalid||e.isUpdating),a(),s("ngIf",!e.isUpdating),a(),s("ngIf",e.isUpdating),a(4),s("formGroup",e.passwordForm),a(4),f("error",((w=e.passwordForm.get("currentPassword"))==null?null:w.invalid)&&((w=e.passwordForm.get("currentPassword"))==null?null:w.touched)),a(),s("ngIf",((_=e.passwordForm.get("currentPassword"))==null?null:_.invalid)&&((_=e.passwordForm.get("currentPassword"))==null?null:_.touched)),a(4),f("error",((v=e.passwordForm.get("newPassword"))==null?null:v.invalid)&&((v=e.passwordForm.get("newPassword"))==null?null:v.touched)),a(),s("ngIf",((h=e.passwordForm.get("newPassword"))==null?null:h.invalid)&&((h=e.passwordForm.get("newPassword"))==null?null:h.touched)),a(4),f("error",((C=e.passwordForm.get("confirmPassword"))==null?null:C.invalid)&&((C=e.passwordForm.get("confirmPassword"))==null?null:C.touched)),a(),s("ngIf",((F=e.passwordForm.get("confirmPassword"))==null?null:F.invalid)&&((F=e.passwordForm.get("confirmPassword"))==null?null:F.touched)),a(),s("disabled",e.passwordForm.invalid||e.isUpdatingPassword),a(),s("ngIf",!e.isUpdatingPassword),a(),s("ngIf",e.isUpdatingPassword)}},dependencies:[M,y,V,T,k,I,N,z,A],styles:[".profile-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}.profile-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:10px;font-size:2rem}.profile-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:1.1rem}.profile-content[_ngcontent-%COMP%]{display:grid;gap:30px;margin-bottom:40px}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:30px;box-shadow:0 4px 6px #0000001a;border:1px solid #e5e7eb}.profile-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1f2937;margin-bottom:25px;font-size:1.5rem;border-bottom:2px solid #e5e7eb;padding-bottom:15px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#374151;font-weight:500}.form-control[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #d1d5db;border-radius:8px;font-size:1rem;transition:border-color .3s,box-shadow .3s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-control.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-control[readonly][_ngcontent-%COMP%]{background-color:#f9fafb;color:#6b7280}.error-message[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:5px}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%;padding:12px 24px;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .3s;margin-top:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb;transform:translateY(-1px)}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#059669;transform:translateY(-1px)}.btn-secondary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af;cursor:not-allowed}.profile-footer[_ngcontent-%COMP%]{text-align:center}.btn-back[_ngcontent-%COMP%]{padding:12px 24px;background-color:#6b7280;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .3s}.btn-back[_ngcontent-%COMP%]:hover{background-color:#4b5563}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:15px}.profile-card[_ngcontent-%COMP%]{padding:20px}}"]});let r=l;return r})();export{te as ProfileComponent};
