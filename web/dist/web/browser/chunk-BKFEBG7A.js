import{a as Z}from"./chunk-CADSBCFI.js";import{b as D,d as F,e as N,f as z,g as B,h as R,i as j,l as q,m as U,n as Q,o as Y,q as G}from"./chunk-CY3U7FEM.js";import"./chunk-JOMA7PJZ.js";import{$a as b,Aa as y,Ga as P,Jb as T,Ka as C,Kb as k,Pb as W,Xa as m,Xb as S,Y as c,Ya as i,Yb as v,Z as _,Za as o,Zb as L,_a as I,a as O,ab as u,bb as s,bc as A,fb as V,gb as E,hb as d,ib as w,jb as h,kb as g,lb as x,mb as f,wa as l}from"./chunk-G7TP3EBD.js";function X(r,p){r&1&&(i(0,"div",5),I(1,"div",6),i(2,"p"),d(3,"Carregando leads..."),o()())}function J(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(2);m("value",t),l(),h(" ",n.getStatusLabel(t)," ")}}function K(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(2);m("value",t),l(),h(" ",n.getSourceLabel(t)," ")}}function $(r,p){if(r&1){let t=b();i(0,"button",23),u("click",function(){c(t);let e=s(2);return _(e.openCreateModal())}),d(1," \u2795 Novo Lead "),o()}}function ee(r,p){if(r&1){let t=b();i(0,"button",49),u("click",function(){c(t);let e=s().$implicit,a=s(3);return _(a.openEditModal(e))}),d(1," \u270F\uFE0F "),o()}}function te(r,p){if(r&1){let t=b();i(0,"button",50),u("click",function(){c(t);let e=s().$implicit,a=s(3);return _(a.deleteLead(e))}),d(1," \u{1F5D1}\uFE0F "),o()}}function ne(r,p){if(r&1&&(i(0,"div",37)(1,"span",38),d(2,"Valor:"),o(),i(3,"span",39),d(4),o()()),r&2){let t=s().$implicit,n=s(3);l(4),w(n.formatCurrency(t.valorContrato))}}function ie(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(5);m("value",t),l(),h(" ",n.getStatusLabel(t)," ")}}function oe(r,p){if(r&1){let t=b();i(0,"div",51)(1,"select",52),u("change",function(e){c(t);let a=s().$implicit,M=s(3);return _(M.onStatusChange(e,a))}),i(2,"option",14),d(3,"Mudar Status"),o(),C(4,ie,2,2,"option",15),o()()}if(r&2){let t=s(4);l(4),m("ngForOf",t.Object.values(t.LeadStatus))}}function ae(r,p){if(r&1){let t=b();i(0,"div",26)(1,"div",27)(2,"div",28)(3,"span"),d(4),o()(),i(5,"div",29)(6,"h3"),d(7),o(),i(8,"p",30),d(9),o(),i(10,"p",31),d(11),o()(),i(12,"div",32)(13,"button",33),u("click",function(){let e=c(t).$implicit,a=s(3);return _(a.openWhatsApp(e))}),d(14," \u{1F4F1} "),o(),C(15,ee,2,0,"button",34)(16,te,2,0,"button",35),o()(),i(17,"div",36)(18,"div",37)(19,"span",38),d(20,"Empresa:"),o(),i(21,"span",39),d(22),o()(),i(23,"div",37)(24,"span",38),d(25,"Cargo:"),o(),i(26,"span",39),d(27),o()(),i(28,"div",37)(29,"span",38),d(30,"Fonte:"),o(),i(31,"span",40),d(32),o()(),C(33,ne,5,1,"div",41),o(),i(34,"div",42)(35,"span",43),d(36),o()(),i(37,"div",44)(38,"div",45),d(39),o(),i(40,"div",46)(41,"button",47),u("click",function(){let e=c(t).$implicit,a=s(3);return _(a.openInteractionModal(e))}),d(42," \u{1F4AC} Intera\xE7\xE3o "),o(),C(43,oe,5,1,"div",48),o()()()}if(r&2){let t=p.$implicit,n=s(3);l(4),w(t.nome.charAt(0)),l(3),w(t.nome),l(2),w(t.email),l(2),w(t.telefone),l(4),m("ngIf",n.canEditLeads()),l(),m("ngIf",n.canDeleteLeads()),l(6),w(t.empresa||"N\xE3o informado"),l(5),w(t.cargo||"N\xE3o informado"),l(5),w(n.getSourceLabel(t.fonte)),l(),m("ngIf",n.canViewContractValues()),l(2),V("background-color",n.getStatusColor(t.status)),l(),h(" ",n.getStatusLabel(t.status)," "),l(3),h(" Criado em: ",n.formatDate(t.dataCriacao)," "),l(4),m("ngIf",n.canEditLeads())}}function re(r,p){if(r&1&&(i(0,"div",24),C(1,ae,44,15,"div",25),o()),r&2){let t=s(2);l(),m("ngForOf",t.filteredLeads)}}function de(r,p){if(r&1){let t=b();i(0,"div",53)(1,"div",54),d(2,"\u{1F4CB}"),o(),i(3,"h3"),d(4,"Nenhum lead encontrado"),o(),i(5,"p"),d(6,"N\xE3o h\xE1 leads que correspondam aos filtros aplicados."),o(),i(7,"button",23),u("click",function(){c(t);let e=s(2);return _(e.clearFilters())}),d(8," Limpar Filtros "),o()()}}function le(r,p){if(r&1){let t=b();i(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"input",11),f("ngModelChange",function(e){c(t);let a=s();return x(a.searchTerm,e)||(a.searchTerm=e),_(e)}),u("input",function(){c(t);let e=s();return _(e.filterLeads())}),o()(),i(5,"div",12)(6,"select",13),f("ngModelChange",function(e){c(t);let a=s();return x(a.selectedStatus,e)||(a.selectedStatus=e),_(e)}),u("change",function(){c(t);let e=s();return _(e.filterLeads())}),i(7,"option",14),d(8,"Todos os Status"),o(),C(9,J,2,2,"option",15),o(),i(10,"select",13),f("ngModelChange",function(e){c(t);let a=s();return x(a.selectedSource,e)||(a.selectedSource=e),_(e)}),u("change",function(){c(t);let e=s();return _(e.filterLeads())}),i(11,"option",14),d(12,"Todas as Fontes"),o(),C(13,K,2,2,"option",15),o(),i(14,"button",16),u("click",function(){c(t);let e=s();return _(e.clearFilters())}),d(15," \u{1F504} Limpar Filtros "),o()()(),i(16,"div",17),C(17,$,2,0,"button",18),o()(),i(18,"div",19)(19,"span"),d(20),o()(),C(21,re,2,1,"div",20)(22,de,9,0,"div",21),o()}if(r&2){let t=s();l(4),g("ngModel",t.searchTerm),l(2),g("ngModel",t.selectedStatus),l(3),m("ngForOf",t.Object.values(t.LeadStatus)),l(),g("ngModel",t.selectedSource),l(3),m("ngForOf",t.Object.values(t.LeadSource)),l(4),m("ngIf",t.canEditLeads()),l(3),h("",t.filteredLeads.length," lead(s) encontrado(s)"),l(),m("ngIf",t.filteredLeads.length>0),l(),m("ngIf",t.filteredLeads.length===0&&!t.loading)}}function se(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(2);m("value",t),l(),h(" ",n.getSourceLabel(t)," ")}}function ce(r,p){if(r&1){let t=b();i(0,"div",61)(1,"label",81),d(2,"Valor do Contrato"),o(),i(3,"input",82),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.newLead.valorContrato,e)||(a.newLead.valorContrato=e),_(e)}),o()()}if(r&2){let t=s(2);l(3),g("ngModel",t.newLead.valorContrato)}}function _e(r,p){if(r&1){let t=b();i(0,"div",55),u("click",function(){c(t);let e=s();return _(e.closeModals())}),i(1,"div",56),u("click",function(e){return c(t),_(e.stopPropagation())}),i(2,"div",57)(3,"h2"),d(4,"Novo Lead"),o(),i(5,"button",58),u("click",function(){c(t);let e=s();return _(e.closeModals())}),d(6,"\u2715"),o()(),i(7,"div",59)(8,"form",60),u("ngSubmit",function(){c(t);let e=s();return _(e.createLead())}),i(9,"div",61)(10,"label",62),d(11,"Nome *"),o(),i(12,"input",63),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.nome,e)||(a.newLead.nome=e),_(e)}),o()(),i(13,"div",64)(14,"div",61)(15,"label",65),d(16,"Email *"),o(),i(17,"input",66),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.email,e)||(a.newLead.email=e),_(e)}),o()(),i(18,"div",61)(19,"label",67),d(20,"Telefone *"),o(),i(21,"input",68),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.telefone,e)||(a.newLead.telefone=e),_(e)}),o()()(),i(22,"div",64)(23,"div",61)(24,"label",69),d(25,"Empresa"),o(),i(26,"input",70),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.empresa,e)||(a.newLead.empresa=e),_(e)}),o()(),i(27,"div",61)(28,"label",71),d(29,"Cargo"),o(),i(30,"input",72),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.cargo,e)||(a.newLead.cargo=e),_(e)}),o()()(),i(31,"div",64)(32,"div",61)(33,"label",73),d(34,"Fonte *"),o(),i(35,"select",74),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.fonte,e)||(a.newLead.fonte=e),_(e)}),C(36,se,2,2,"option",15),o()(),C(37,ce,4,1,"div",75),o(),i(38,"div",61)(39,"label",76),d(40,"Observa\xE7\xF5es"),o(),i(41,"textarea",77),f("ngModelChange",function(e){c(t);let a=s();return x(a.newLead.observacoes,e)||(a.newLead.observacoes=e),_(e)}),o()(),i(42,"div",78)(43,"button",79),u("click",function(){c(t);let e=s();return _(e.closeModals())}),d(44,"Cancelar"),o(),i(45,"button",80),d(46,"Criar Lead"),o()()()()()()}if(r&2){let t=s();l(12),g("ngModel",t.newLead.nome),l(5),g("ngModel",t.newLead.email),l(4),g("ngModel",t.newLead.telefone),l(5),g("ngModel",t.newLead.empresa),l(4),g("ngModel",t.newLead.cargo),l(5),g("ngModel",t.newLead.fonte),l(),m("ngForOf",t.Object.values(t.LeadSource)),l(),m("ngIf",t.canViewContractValues()),l(4),g("ngModel",t.newLead.observacoes)}}function pe(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(3);m("value",t),l(),h(" ",n.getSourceLabel(t)," ")}}function me(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit,n=s(3);m("value",t),l(),h(" ",n.getStatusLabel(t)," ")}}function ue(r,p){if(r&1){let t=b();i(0,"div",61)(1,"label",104),d(2,"Valor do Contrato"),o(),i(3,"input",105),f("ngModelChange",function(e){c(t);let a=s(3);return x(a.editLead.valorContrato,e)||(a.editLead.valorContrato=e),_(e)}),o()()}if(r&2){let t=s(3);l(3),g("ngModel",t.editLead.valorContrato)}}function ge(r,p){if(r&1){let t=b();i(0,"div",87)(1,"form",60),u("ngSubmit",function(){c(t);let e=s(2);return _(e.updateLead())}),i(2,"div",61)(3,"label",88),d(4,"Nome *"),o(),i(5,"input",89),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.nome,e)||(a.editLead.nome=e),_(e)}),o()(),i(6,"div",64)(7,"div",61)(8,"label",90),d(9,"Email *"),o(),i(10,"input",91),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.email,e)||(a.editLead.email=e),_(e)}),o()(),i(11,"div",61)(12,"label",92),d(13,"Telefone *"),o(),i(14,"input",93),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.telefone,e)||(a.editLead.telefone=e),_(e)}),o()()(),i(15,"div",64)(16,"div",61)(17,"label",94),d(18,"Empresa"),o(),i(19,"input",95),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.empresa,e)||(a.editLead.empresa=e),_(e)}),o()(),i(20,"div",61)(21,"label",96),d(22,"Cargo"),o(),i(23,"input",97),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.cargo,e)||(a.editLead.cargo=e),_(e)}),o()()(),i(24,"div",64)(25,"div",61)(26,"label",98),d(27,"Fonte *"),o(),i(28,"select",99),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.fonte,e)||(a.editLead.fonte=e),_(e)}),C(29,pe,2,2,"option",15),o()(),i(30,"div",61)(31,"label",100),d(32,"Status *"),o(),i(33,"select",101),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.status,e)||(a.editLead.status=e),_(e)}),C(34,me,2,2,"option",15),o()()(),i(35,"div",64),C(36,ue,4,1,"div",75),o(),i(37,"div",61)(38,"label",102),d(39,"Observa\xE7\xF5es"),o(),i(40,"textarea",103),f("ngModelChange",function(e){c(t);let a=s(2);return x(a.editLead.observacoes,e)||(a.editLead.observacoes=e),_(e)}),o()(),i(41,"div",78)(42,"button",79),u("click",function(){c(t);let e=s(2);return _(e.closeModals())}),d(43,"Cancelar"),o(),i(44,"button",80),d(45,"Atualizar Lead"),o()()()()}if(r&2){let t=s(2);l(5),g("ngModel",t.editLead.nome),l(5),g("ngModel",t.editLead.email),l(4),g("ngModel",t.editLead.telefone),l(5),g("ngModel",t.editLead.empresa),l(4),g("ngModel",t.editLead.cargo),l(5),g("ngModel",t.editLead.fonte),l(),m("ngForOf",t.Object.values(t.LeadSource)),l(4),g("ngModel",t.editLead.status),l(),m("ngForOf",t.Object.values(t.LeadStatus)),l(2),m("ngIf",t.canViewContractValues()),l(4),g("ngModel",t.editLead.observacoes)}}function xe(r,p){if(r&1){let t=b();i(0,"button",110),u("click",function(){c(t);let e=s(3);return _(e.openInteractionModal(e.editLead))}),d(1," \u2795 Nova Intera\xE7\xE3o "),o()}}function fe(r,p){if(r&1&&(i(0,"div",113)(1,"div",114)(2,"span",115),d(3),o(),i(4,"span",116),d(5),o()(),i(6,"div",117),d(7),o(),i(8,"div",118),d(9),o()()),r&2){let t=p.$implicit,n=s(4);l(3),w(n.getInteractionTypeLabel(t.tipo)),l(2),w(n.formatDate(t.dataCriacao)),l(2),h(" ",t.conteudo," "),l(2),h(" Por: ",t.usuarioCriacao," ")}}function Ce(r,p){if(r&1&&(i(0,"div",111),C(1,fe,10,4,"div",112),o()),r&2){let t=s(3);l(),m("ngForOf",t.leadInteractions)}}function ve(r,p){if(r&1){let t=b();i(0,"button",23),u("click",function(){c(t);let e=s(4);return _(e.openInteractionModal(e.editLead))}),d(1," Registrar Primeira Intera\xE7\xE3o "),o()}}function be(r,p){if(r&1&&(i(0,"div",119)(1,"p"),d(2,"Nenhuma intera\xE7\xE3o registrada para este lead."),o(),C(3,ve,2,0,"button",18),o()),r&2){let t=s(3);l(3),m("ngIf",t.editLead)}}function he(r,p){if(r&1&&(i(0,"div",87)(1,"div",106)(2,"h3"),d(3,"Hist\xF3rico de Intera\xE7\xF5es"),o(),C(4,xe,2,0,"button",107),o(),C(5,Ce,2,1,"div",108)(6,be,4,1,"div",109),o()),r&2){let t=s(2);l(4),m("ngIf",t.editLead),l(),m("ngIf",t.leadInteractions.length>0),l(),m("ngIf",t.leadInteractions.length===0)}}function we(r,p){if(r&1){let t=b();i(0,"div",55),u("click",function(){c(t);let e=s();return _(e.closeModals())}),i(1,"div",83),u("click",function(e){return c(t),_(e.stopPropagation())}),i(2,"div",57)(3,"h2"),d(4,"Editar Lead"),o(),i(5,"button",58),u("click",function(){c(t);let e=s();return _(e.closeModals())}),d(6,"\u2715"),o()(),i(7,"div",84)(8,"button",85),u("click",function(){c(t);let e=s();return _(e.activeTab="details")}),d(9," \u{1F4DD} Detalhes "),o(),i(10,"button",85),u("click",function(){c(t);let e=s();return _(e.activeTab="interactions")}),d(11),o()(),i(12,"div",59),C(13,ge,46,11,"div",86)(14,he,7,3,"div",86),o()()()}if(r&2){let t=s();l(8),E("active",t.activeTab==="details"),l(2),E("active",t.activeTab==="interactions"),l(),h(" \u{1F4AC} Intera\xE7\xF5es (",t.leadInteractions.length,") "),l(2),m("ngIf",t.activeTab==="details"&&t.editLead),l(),m("ngIf",t.activeTab==="interactions"&&t.editLead)}}function Le(r,p){if(r&1&&(i(0,"option",22),d(1),o()),r&2){let t=p.$implicit;m("value",t),l(),h(" ",t.replace("_"," ").toLowerCase()," ")}}function Me(r,p){if(r&1){let t=b();i(0,"div",55),u("click",function(){c(t);let e=s();return _(e.closeModals())}),i(1,"div",56),u("click",function(e){return c(t),_(e.stopPropagation())}),i(2,"div",57)(3,"h2"),d(4,"Nova Intera\xE7\xE3o"),o(),i(5,"button",58),u("click",function(){c(t);let e=s();return _(e.closeModals())}),d(6,"\u2715"),o()(),i(7,"div",59)(8,"form",60),u("ngSubmit",function(){c(t);let e=s();return _(e.addInteraction())}),i(9,"div",61)(10,"label",120),d(11,"Tipo de Intera\xE7\xE3o *"),o(),i(12,"select",121),f("ngModelChange",function(e){c(t);let a=s();return x(a.newInteraction.tipo,e)||(a.newInteraction.tipo=e),_(e)}),C(13,Le,2,2,"option",15),o()(),i(14,"div",61)(15,"label",122),d(16,"Conte\xFAdo *"),o(),i(17,"textarea",123),f("ngModelChange",function(e){c(t);let a=s();return x(a.newInteraction.conteudo,e)||(a.newInteraction.conteudo=e),_(e)}),o()(),i(18,"div",78)(19,"button",79),u("click",function(){c(t);let e=s();return _(e.closeModals())}),d(20,"Cancelar"),o(),i(21,"button",80),d(22,"Registrar Intera\xE7\xE3o"),o()()()()()()}if(r&2){let t=s();l(12),g("ngModel",t.newInteraction.tipo),l(),m("ngForOf",t.Object.values(t.InteractionType)),l(4),g("ngModel",t.newInteraction.conteudo)}}var ke=(()=>{let p=class p{constructor(n,e){this.leadService=n,this.authService=e,this.leads=[],this.filteredLeads=[],this.selectedLead=null,this.showCreateModal=!1,this.showEditModal=!1,this.showInteractionModal=!1,this.loading=!0,this.activeTab="details",this.leadInteractions=[],this.searchTerm="",this.selectedStatus="",this.selectedSource="",this.newLead={},this.editLead=null,this.newInteraction={},this.LeadStatus=v,this.LeadSource=S,this.InteractionType=L,this.Object=Object}ngOnInit(){this.loadLeads()}loadLeads(){this.loading=!0,this.leadService.getLeads().subscribe({next:n=>{this.leads=n,this.filteredLeads=n,this.loading=!1},error:n=>{console.error("Erro ao carregar leads:",n),this.loading=!1}})}createLead(){if(!this.newLead.nome||!this.newLead.email||!this.newLead.telefone||!this.newLead.fonte){alert("Por favor, preencha todos os campos obrigat\xF3rios");return}this.leadService.createLead(this.newLead).subscribe({next:n=>{this.leads.unshift(n),this.filterLeads(),this.showCreateModal=!1,this.newLead={},alert("Lead criado com sucesso!")},error:n=>{console.error("Erro ao criar lead:",n),alert("Erro ao criar lead")}})}updateLead(){this.editLead?.id&&this.leadService.updateLead(this.editLead.id,this.editLead).subscribe({next:n=>{let e=this.leads.findIndex(a=>a.id===n.id);e!==-1&&(this.leads[e]=n,this.filterLeads()),this.showEditModal=!1,this.editLead=null,alert("Lead atualizado com sucesso!")},error:n=>{console.error("Erro ao atualizar lead:",n),alert("Erro ao atualizar lead")}})}deleteLead(n){confirm(`Tem certeza que deseja excluir o lead "${n.nome}"?`)&&n.id&&this.leadService.deleteLead(n.id).subscribe({next:()=>{this.leads=this.leads.filter(e=>e.id!==n.id),this.filterLeads(),alert("Lead exclu\xEDdo com sucesso!")},error:e=>{console.error("Erro ao excluir lead:",e),alert("Erro ao excluir lead")}})}updateLeadStatus(n,e){n.id&&this.leadService.updateLeadStatus(n.id,e).subscribe({next:a=>{let M=this.leads.findIndex(H=>H.id===a.id);M!==-1&&(this.leads[M]=a,this.filterLeads()),alert(`Status do lead atualizado para: ${this.getStatusLabel(e)}`)},error:a=>{console.error("Erro ao atualizar status:",a),alert("Erro ao atualizar status")}})}onStatusChange(n,e){let M=n.target.value;M&&this.updateLeadStatus(e,M)}addInteraction(){if(!this.selectedLead?.id||!this.newInteraction.tipo||!this.newInteraction.conteudo){alert("Por favor, preencha todos os campos da intera\xE7\xE3o");return}this.leadService.createInteraction(this.selectedLead.id,this.newInteraction.tipo,this.newInteraction.conteudo).subscribe({next:n=>{this.showInteractionModal=!1,this.newInteraction={},alert("Intera\xE7\xE3o registrada com sucesso!")},error:n=>{console.error("Erro ao criar intera\xE7\xE3o:",n),alert("Erro ao criar intera\xE7\xE3o")}})}filterLeads(){this.filteredLeads=this.leads.filter(n=>{let e=!this.searchTerm||n.nome.toLowerCase().includes(this.searchTerm.toLowerCase())||n.email.toLowerCase().includes(this.searchTerm.toLowerCase())||n.telefone.includes(this.searchTerm)||n.empresa?.toLowerCase().includes(this.searchTerm.toLowerCase()),a=!this.selectedStatus||n.status===this.selectedStatus,M=!this.selectedSource||n.fonte===this.selectedSource;return e&&a&&M})}clearFilters(){this.searchTerm="",this.selectedStatus="",this.selectedSource="",this.filterLeads()}openCreateModal(){this.showCreateModal=!0,this.newLead={status:v.NOVO_LEAD,fonte:S.INDICACAO}}openEditModal(n){this.editLead=O({},n),this.showEditModal=!0,this.activeTab="details",n.id&&this.loadLeadInteractions(n.id)}openInteractionModal(n){this.selectedLead=n,this.showInteractionModal=!0,this.newInteraction={tipo:L.CONTATO_INICIAL}}closeModals(){this.showCreateModal=!1,this.showEditModal=!1,this.showInteractionModal=!1,this.newLead={},this.editLead=null,this.newInteraction={},this.selectedLead=null,this.activeTab="details",this.leadInteractions=[]}loadLeadInteractions(n){this.leadService.getInteractions(n).subscribe({next:e=>{this.leadInteractions=e},error:e=>{console.error("Erro ao carregar intera\xE7\xF5es:",e),this.leadInteractions=[]}})}getStatusLabel(n){return{[v.NOVO_LEAD]:"Novo Lead",[v.LEAD_QUALIFICADO]:"Qualificado",[v.INTERESSE]:"Interessado",[v.PROPOSTA_ACEITA]:"Proposta Aceita",[v.IMPLANTADO]:"Implantado",[v.FATURADO]:"Faturado",[v.ARMAZENADO_FUTURO]:"Armazenado",[v.COBRAR]:"Cobrar"}[n]||n}getSourceLabel(n){return{[S.INDICACAO]:"Indica\xE7\xE3o",[S.EVENTO]:"Evento",[S.REDES_SOCIAIS]:"Redes Sociais",[S.EX_CLIENTE]:"Ex Cliente",[S.PARCEIRO]:"Parceiro"}[n]||n}getInteractionTypeLabel(n){return{[L.CONTATO_INICIAL]:"Contato Inicial",[L.QUALIFICACAO]:"Qualifica\xE7\xE3o",[L.APRESENTACAO]:"Apresenta\xE7\xE3o",[L.PROPOSTA]:"Proposta",[L.COBRANCA]:"Cobran\xE7a",[L.IMPLEMENTACAO]:"Implementa\xE7\xE3o",[L.OUTRO]:"Outro"}[n]||n}getStatusColor(n){return{[v.NOVO_LEAD]:"#3b82f6",[v.LEAD_QUALIFICADO]:"#10b981",[v.INTERESSE]:"#f59e0b",[v.PROPOSTA_ACEITA]:"#8b5cf6",[v.IMPLANTADO]:"#06b6d4",[v.FATURADO]:"#059669",[v.ARMAZENADO_FUTURO]:"#6b7280",[v.COBRAR]:"#ef4444"}[n]||"#6b7280"}formatCurrency(n){return n?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n):"R$ 0,00"}formatDate(n){return new Date(n).toLocaleDateString("pt-BR")}canEditLeads(){return this.authService.canEditLeads()}canDeleteLeads(){return this.authService.canDeleteLeads()}canViewContractValues(){return this.authService.canViewContractValues()}openWhatsApp(n){this.leadService.openWhatsApp(n)}};p.\u0275fac=function(e){return new(e||p)(y(Z),y(A))},p.\u0275cmp=P({type:p,selectors:[["app-leads"]],decls:11,vars:5,consts:[[1,"leads-container"],[1,"leads-header"],["class","loading-container",4,"ngIf"],["class","leads-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"leads-content"],[1,"actions-bar"],[1,"search-filters"],[1,"search-box"],["type","text","placeholder","Buscar leads...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filters"],[1,"filter-select",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-outline",3,"click"],[1,"actions"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"results-info"],["class","leads-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"value"],[1,"btn","btn-primary",3,"click"],[1,"leads-grid"],["class","lead-card",4,"ngFor","ngForOf"],[1,"lead-card"],[1,"lead-header"],[1,"lead-avatar"],[1,"lead-info"],[1,"lead-email"],[1,"lead-phone"],[1,"lead-actions"],["title","Enviar WhatsApp",1,"btn-icon",3,"click"],["class","btn-icon","title","Editar",3,"click",4,"ngIf"],["class","btn-icon btn-danger","title","Excluir",3,"click",4,"ngIf"],[1,"lead-details"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","source-badge"],["class","detail-row",4,"ngIf"],[1,"lead-status"],[1,"status-badge"],[1,"lead-footer"],[1,"lead-date"],[1,"lead-actions-footer"],[1,"btn","btn-sm",3,"click"],["class","status-actions",4,"ngIf"],["title","Editar",1,"btn-icon",3,"click"],["title","Excluir",1,"btn-icon","btn-danger",3,"click"],[1,"status-actions"],[1,"status-select",3,"change"],[1,"empty-state"],[1,"empty-icon"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"btn-close",3,"click"],[1,"modal-body"],[3,"ngSubmit"],[1,"form-group"],["for","nome"],["type","text","id","nome","name","nome","required","",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-row"],["for","email"],["type","email","id","email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","telefone"],["type","text","id","telefone","name","telefone","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","empresa"],["type","text","id","empresa","name","empresa",1,"form-input",3,"ngModelChange","ngModel"],["for","cargo"],["type","text","id","cargo","name","cargo",1,"form-input",3,"ngModelChange","ngModel"],["for","fonte"],["id","fonte","name","fonte","required","",1,"form-input",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["for","observacoes"],["id","observacoes","name","observacoes","rows","3",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["for","valorContrato"],["type","number","id","valorContrato","name","valorContrato","step","0.01",1,"form-input",3,"ngModelChange","ngModel"],[1,"modal","modal-large",3,"click"],[1,"modal-tabs"],[1,"tab-button",3,"click"],["class","tab-content",4,"ngIf"],[1,"tab-content"],["for","edit-nome"],["type","text","id","edit-nome","name","nome","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-email"],["type","email","id","edit-email","name","email","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-telefone"],["type","text","id","edit-telefone","name","telefone","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-empresa"],["type","text","id","edit-empresa","name","empresa",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-cargo"],["type","text","id","edit-cargo","name","cargo",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-fonte"],["id","edit-fonte","name","fonte","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-status"],["id","edit-status","name","status","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-observacoes"],["id","edit-observacoes","name","observacoes","rows","3",1,"form-input",3,"ngModelChange","ngModel"],["for","edit-valorContrato"],["type","number","id","edit-valorContrato","name","valorContrato","step","0.01",1,"form-input",3,"ngModelChange","ngModel"],[1,"interactions-header"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","interactions-list",4,"ngIf"],["class","empty-interactions",4,"ngIf"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"interactions-list"],["class","interaction-item",4,"ngFor","ngForOf"],[1,"interaction-item"],[1,"interaction-header"],[1,"interaction-type"],[1,"interaction-date"],[1,"interaction-content"],[1,"interaction-user"],[1,"empty-interactions"],["for","interaction-tipo"],["id","interaction-tipo","name","tipo","required","",1,"form-input",3,"ngModelChange","ngModel"],["for","interaction-conteudo"],["id","interaction-conteudo","name","conteudo","rows","4","required","","placeholder","Descreva a intera\xE7\xE3o realizada...",1,"form-input",3,"ngModelChange","ngModel"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),d(3,"Gest\xE3o de Leads"),o(),i(4,"p"),d(5,"Gerencie todos os leads do sistema"),o()(),C(6,X,4,0,"div",2)(7,le,23,9,"div",3)(8,_e,47,9,"div",4)(9,we,15,7,"div",4)(10,Me,23,3,"div",4),o()),e&2&&(l(6),m("ngIf",a.loading),l(),m("ngIf",!a.loading),l(),m("ngIf",a.showCreateModal),l(),m("ngIf",a.showEditModal),l(),m("ngIf",a.showInteractionModal))},dependencies:[W,T,k,G,R,U,Q,D,j,q,F,N,Y,B,z],styles:[".leads-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px}.leads-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center}.leads-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;margin:0 0 10px;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.leads-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:20px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;gap:20px;flex-wrap:wrap}.search-filters[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex:1;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filters[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:10px 12px;border:2px solid #e1e5e9;border-radius:6px;font-size:.9rem;background:#fff;min-width:150px}.filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.actions[_ngcontent-%COMP%]{display:flex;gap:10px}.results-info[_ngcontent-%COMP%]{margin-bottom:20px;color:#666;font-size:.9rem}.leads-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;margin-bottom:30px}.lead-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:20px;box-shadow:0 4px 6px #0000000d;border:1px solid #e1e5e9;transition:all .3s ease}.lead-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 25px #0000001a}.lead-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:15px}.lead-avatar[_ngcontent-%COMP%]{width:50px;height:50px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:1.2rem}.lead-info[_ngcontent-%COMP%]{flex:1}.lead-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:1.1rem;font-weight:600;color:#333}.lead-email[_ngcontent-%COMP%], .lead-phone[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#666}.lead-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;padding:8px;border-radius:6px;transition:all .3s ease}.btn-icon[_ngcontent-%COMP%]:hover{background:#f1f3f4;transform:scale(1.1)}.btn-icon.btn-danger[_ngcontent-%COMP%]:hover{background:#fee;color:#ef4444}.lead-details[_ngcontent-%COMP%]{margin-bottom:15px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:.9rem}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:500}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:400}.source-badge[_ngcontent-%COMP%]{background:#f1f3f4;padding:2px 8px;border-radius:12px;font-size:.8rem;color:#666}.lead-status[_ngcontent-%COMP%]{margin-bottom:15px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;border-radius:20px;font-size:.8rem;font-weight:500;color:#fff;text-transform:uppercase;letter-spacing:.5px}.lead-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}.lead-date[_ngcontent-%COMP%]{font-size:.8rem;color:#666}.lead-actions-footer[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.status-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #e1e5e9;border-radius:6px;font-size:.8rem;background:#fff;min-width:120px}.status-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;color:#333;font-size:1.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1rem}.btn[_ngcontent-%COMP%]{padding:10px 20px;border-radius:8px;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .3s ease;border:none;display:inline-flex;align-items:center;justify-content:center;gap:8px;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn[_ngcontent-%COMP%]:not(:disabled):hover{transform:translateY(-2px)}.interactions-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #e1e5e9}.interactions-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333}.interactions-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.interaction-item[_ngcontent-%COMP%]{background:#f8fafc;border:1px solid #e1e5e9;border-radius:8px;padding:15px;margin-bottom:12px;transition:all .3s ease}.interaction-item[_ngcontent-%COMP%]:hover{border-color:#667eea;box-shadow:0 2px 8px #667eea1a}.interaction-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.interaction-type[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:4px 8px;border-radius:12px;font-size:.8rem;font-weight:500;text-transform:uppercase}.interaction-date[_ngcontent-%COMP%]{color:#64748b;font-size:.8rem}.interaction-content[_ngcontent-%COMP%]{color:#334155;font-size:.9rem;line-height:1.5;margin-bottom:10px}.interaction-user[_ngcontent-%COMP%]{color:#64748b;font-size:.8rem;font-style:italic}.empty-interactions[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#64748b}.empty-interactions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;box-shadow:0 4px 12px #667eea4d}.btn-primary[_ngcontent-%COMP%]:not(:disabled):hover{box-shadow:0 6px 20px #667eea66}.btn-secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.btn-secondary[_ngcontent-%COMP%]:not(:disabled):hover{background:#4b5563}.btn-outline[_ngcontent-%COMP%]{background:transparent;color:#667eea;border:2px solid #667eea}.btn-outline[_ngcontent-%COMP%]:not(:disabled):hover{background:#667eea;color:#fff}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.8rem}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}.modal-large[_ngcontent-%COMP%]{max-width:800px;width:100%}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 40px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e1e5e9}.modal-tabs[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #e1e5e9;background:#f8fafc}.tab-button[_ngcontent-%COMP%]{background:none;border:none;padding:16px 24px;font-size:.9rem;font-weight:500;color:#64748b;cursor:pointer;transition:all .3s ease;border-bottom:3px solid transparent}.tab-button[_ngcontent-%COMP%]:hover{color:#334155;background:#f1f5f9}.tab-button.active[_ngcontent-%COMP%]{color:#667eea;border-bottom-color:#667eea;background:#fff}.tab-content[_ngcontent-%COMP%]{display:block}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:#333}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer;padding:8px;border-radius:6px;transition:background-color .3s ease}.btn-close[_ngcontent-%COMP%]:hover{background:#f1f3f4}.modal-body[_ngcontent-%COMP%]{padding:24px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;color:#333;font-size:.9rem}.form-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input[_ngcontent-%COMP%]:hover:not(:focus){border-color:#cbd5e0}textarea.form-input[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;margin-top:30px;padding-top:20px;border-top:1px solid #e1e5e9}@media (max-width: 768px){.leads-container[_ngcontent-%COMP%]{padding:15px}.leads-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.actions-bar[_ngcontent-%COMP%], .search-filters[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filters[_ngcontent-%COMP%]{justify-content:center}.leads-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.lead-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.lead-actions-footer[_ngcontent-%COMP%]{justify-content:center}.modal[_ngcontent-%COMP%]{margin:10px;max-height:95vh}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 480px){.leads-grid[_ngcontent-%COMP%]{gap:15px}.lead-card[_ngcontent-%COMP%]{padding:15px}.lead-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.lead-actions[_ngcontent-%COMP%]{justify-content:center}}.lead-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-input[_ngcontent-%COMP%]:focus-visible, .btn[_ngcontent-%COMP%]:focus-visible, .btn-icon[_ngcontent-%COMP%]:focus-visible{outline:2px solid #667eea;outline-offset:2px}*[_ngcontent-%COMP%]{transition:color .3s ease,background-color .3s ease,border-color .3s ease,transform .3s ease}"]});let r=p;return r})();export{ke as LeadsComponent};
